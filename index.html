<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ„ Mariah Carey è–èª•å€’æ•¸ x ä¸‹ç­è¨ˆç®—æ©Ÿ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #493240 100%);
      margin: 0; padding: 20px; color: #fff;
      overflow-x: hidden; min-height: 100vh;
    }
    h1, h2 { text-align: center; color: #f8c25c; }
    .main-wrapper {
      display: flex; flex-wrap: wrap; justify-content: center;
      gap: 20px; align-items: flex-start; position: relative; z-index: 2;
    }
    .panel {
      background: rgba(255,255,255,0.08);
      border: 2px solid #f8c25c;
      border-radius: 12px;
      padding: 20px; width: 100%; max-width: 360px;
      box-shadow: 0 8px 24px rgba(255,255,255,0.15);
      backdrop-filter: blur(6px);
    }
    button {
      background: linear-gradient(135deg, #f8c25c 0%, #f7b733 100%);
      border: none; border-radius: 6px; padding: 14px;
      font-size: 16px; color: #fff; width: 100%;
      cursor: pointer; transition: all 0.3s;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255,255,255,0.3);
    }
    input[type="text"] {
      width: 100%; padding: 10px; border-radius: 4px;
      border: 2px solid #f8c25c; font-size: 16px;
      background: rgba(255,255,255,0.1); color: #fff;
    }
    .holiday-title { font-size: 20px; color: #f8c25c; text-align: center; }
    .holiday-date, .holiday-countdown { text-align: center; color: #f8e8b0; }
    .horoscope {
      background: rgba(255,255,255,0.1);
      border: 1px solid #f8c25c;
      border-radius: 8px; padding: 10px; margin-top: 15px;
      color: #f8e8b0; text-align: center;
    }
    .footer-note {
      text-align: center; color: #f8e8b0; font-size: 14px;
      margin-top: 30px; animation: glow 2s infinite alternate;
    }
    @keyframes glow { from {text-shadow: 0 0 5px #f8c25c;} to {text-shadow: 0 0 15px #fff6b7;} }
    #xmasOverlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.9); display: none;
      justify-content: center; align-items: center; flex-direction: column;
      z-index: 9999; text-align: center; color: #fff;
    }
    #xmasOverlay button {
      width: auto; margin: 10px; font-size: 16px;
      background: linear-gradient(135deg, #f8c25c 0%, #f7b733 100%);
    }
    .snowflake {
      position: fixed; color: #fff; user-select: none;
      z-index: 0; opacity: 0.8;
    }
  </style>
</head>
<body>
  <div class="main-wrapper">
    <div class="panel" id="holiday-box"></div>

    <div class="panel">
      <h1>ä»€éº¼æ™‚å€™å¯ä»¥å›å®¶</h1>
      <h2>ğŸ… HURCä¸‹ç­æ™‚é–“è¨ˆç®—æ©Ÿ</h2>
      <label for="start">ä¸Šç­æ™‚é–“ (hhmm):</label>
      <input type="text" id="start" placeholder="HHMM" inputmode="numeric" pattern="[0-9]*" />
      <button onclick="calc()">è¨ˆç®—ä½ çš„ä¸‹ç­æ™‚é–“</button>
      <div id="loading" style="display:none;text-align:center;margin:10px;">ğŸ„ è¨ˆç®—ä¸­...</div>
      <h3 id="result"></h3>
      <div id="countdown" style="display:none;text-align:center;margin-top:15px;">
        <div style="font-weight:bold;">è·é›¢å¯ä»¥é›¢é–‹è¾¦å…¬å®¤é‚„æœ‰</div>
        <div id="countdown-display" style="display:flex;justify-content:center;gap:10px;margin-top:10px;">
          <div><span id="h">00</span> å°æ™‚</div>
          <div><span id="m">00</span> åˆ†é˜</div>
          <div><span id="s">00</span> ç§’</div>
        </div>
      </div>
    </div>

    <div class="panel">
      <h2>ğŸ„ Mariah Carey è§£å‡ä¸­</h2>
      <video id="mariahVideo" src="./mariah-defrosting-slow.mp4" muted playsinline preload="auto" style="width:100%;border-radius:12px;"></video>
    </div>
  </div>

  <div id="xmasOverlay"></div>

  <div class="footer-note">
    ğŸ‘©â€ğŸ’» æ²›æ© æ›´æ–°æ–¼ 2025 å¹´ 11 æœˆ 2 æ—¥ï¼ˆå›ä¾†ä¸Šç­äº†ï¼±ï¼±ï¼‰
  </div>

  <script>
    // ======== ä¸‹ç­è¨ˆç®— ========
    let timer, offTime;
    function update() {
      if (!offTime) return;
      const now = new Date();
      const diff = offTime - now;
      if (diff <= 0) {
        clearInterval(timer);
        document.getElementById('countdown').style.display = 'none';
        document.getElementById('result').innerHTML += '<br><br>ğŸ‰ ä¸‹ç­æ™‚é–“åˆ°äº†ï¼å¿«å›å®¶å§ï¼';
        return;
      }
      document.getElementById('h').textContent = String(Math.floor(diff / 3600000)).padStart(2, '0');
      document.getElementById('m').textContent = String(Math.floor(diff % 3600000 / 60000)).padStart(2, '0');
      document.getElementById('s').textContent = String(Math.floor(diff % 60000 / 1000)).padStart(2, '0');
    }

    function calc() {
      const input = document.getElementById("start").value;
      const result = document.getElementById("result");
      const loading = document.getElementById("loading");
      loading.style.display = 'block'; result.innerHTML = ''; document.getElementById('countdown').style.display = 'none';
      setTimeout(() => {
        loading.style.display = 'none';
        if (!input || input.length !== 4 || isNaN(input)) { result.innerText = "è«‹æ‚¨å†ä»”ç´°ç¢ºèªä¸Šç­æ™‚é–“ï¼Œä¸è¦ç©ç³»çµ± ^^"; return; }
        const h = parseInt(input.substring(0, 2)), min = parseInt(input.substring(2, 4));
        if (h < 0 || h > 23 || min < 0 || min > 59) { result.innerText = "è«‹æ‚¨å†ä»”ç´°ç¢ºèªä¸Šç­æ™‚é–“ï¼Œä¸è¦ç©ç³»çµ± ^^"; return; }
        if (input >= "0000" && input < "0730") { result.innerText = "ä¸Šç­æ™‚é–“æœ€æ—©å¾ 07:30 æ‰“å¡å”·ï¼"; return; }
        if (input >= "1200" && input <= "2359") { result.innerText = "å»ºè­°æ‚¨ç›´æ¥è«‹å‡ ^^"; return; }
        const now = new Date();
        const start = new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, min, 0);
        const work = 9.5 * 3600000;
        const late = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 9, 0, 0);
        if (start > late) {
          const leaveMins = Math.ceil((start - late) / 60000 / 30) * 30;
          const leaveStart = new Date(start.getTime() - leaveMins * 60000);
          const properOffTime = new Date(leaveStart.getTime() + work);
          result.innerHTML = `âš ï¸ é²åˆ°äº†ï¼å»ºè­°è«‹å‡ ${Math.floor(leaveMins/60)}å°æ™‚${leaveMins%60}åˆ†é˜ã€‚<br>`;
          result.innerHTML += `ğŸ•” è«‹å®Œå‡å¾Œå»ºè­°åœ¨ ${properOffTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} ä¸‹ç­`;
          offTime = new Date(start.getTime() + work);
        } else {
          result.innerHTML = "ğŸ‰ ä»Šå¤©åŠªåŠ›èµ·åºŠä¸Šç­äº†ï¼<br>";
          offTime = new Date(start.getTime() + work);
          result.innerHTML += `ğŸ•” æ‚¨çš„ä¸‹ç­æ™‚é–“æ˜¯ï¼š${offTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
        }
        document.getElementById('countdown').style.display = 'block';
        if (timer) clearInterval(timer);
        update(); timer = setInterval(update, 1000);
      }, 800);
    }

    // ======== å‡æœŸå€’æ•¸ + æ˜Ÿåº§è–èª•ç¦®ç‰© ========
    const holidays = [
      { name: "è–èª•ç¯€", month: 12, day: 25 }, { name: "å…ƒæ—¦", month: 1, day: 1 }
    ];
    const gifts = [
      { sign: "â™ˆ ç‰¡ç¾Šåº§", msg: "è¡Œå‹•æ´¾çš„ä½ æœ€é©åˆæ”¶åˆ°ä¸€å°å’–å•¡æ©Ÿï¼Œæç¥åˆæé€Ÿ â˜•" },
      { sign: "â™‰ é‡‘ç‰›åº§", msg: "ä¸€æ¢é«˜ç´šåœå·¾æœ€èƒ½æº«æš–ä½ â€”â€”é‚„æœ‰ä½ çš„ç†è²¡å¿ƒ ğŸ’°" },
      { sign: "â™Š é›™å­åº§", msg: "å…©ä»½ç¦®ç‰©æœƒè®“ä½ æ¯”è¼ƒä¸ç³¾çµï¼Œå› ç‚ºä½ éƒ½æƒ³è¦ ğŸ˜" },
      { sign: "â™‹ å·¨èŸ¹åº§", msg: "æŸ”è»Ÿæ¯›æ¯¯ + ç†±å¯å¯ï¼Œå®Œç¾çš„å†¬å¤œæ¨™é… ğŸ’–" },
      { sign: "â™Œ ç…å­åº§", msg: "é‡‘è‰²é¦™æ°´æˆ–äº®ç‰‡å¤–å¥—ï¼Œè®“ä½ åœ¨æ´¾å°ä¸Šé–ƒçå…¨å ´ âœ¨" },
      { sign: "â™ è™•å¥³åº§", msg: "æ•´é½Šçš„æ‰‹å¸³æœ¬æœƒè®“ä½ å¿ƒæƒ…å¤§å¥½ ğŸ“˜" },
      { sign: "â™ å¤©ç§¤åº§", msg: "é¦™æ°›è Ÿç‡­èƒ½è®“ä½ æ‰¾åˆ°ç¯€æ—¥çš„å¹³è¡¡èˆ‡æµªæ¼« ğŸ”¥" },
      { sign: "â™ å¤©è åº§", msg: "ç¥ç§˜é»‘å·§å…‹åŠ›ç¦®ç›’ï¼Œä¸€å£ç”œä¸€å£å¿ƒå‹• ğŸ«" },
      { sign: "â™ å°„æ‰‹åº§", msg: "æ—…éŠåŸºé‡‘æˆ–éœ²ç‡Ÿè£å‚™ï¼Œä¸–ç•Œéƒ½åœ¨å‘¼å–šä½  ğŸŒ" },
      { sign: "â™‘ æ‘©ç¾¯åº§", msg: "å¯¦ç”¨çš„ä¿æº«ç“¶æˆ–ç­†é›»æ”¯æ¶ï¼Œè·å ´è–èª• MVP ğŸ’¼" },
      { sign: "â™’ æ°´ç“¶åº§", msg: "é›»å­å°ç©å…·æ˜¯ä½ çš„æµªæ¼«ï¼Œè¶Šæ€ªè¶Šå–œæ­¡ âš¡" },
      { sign: "â™“ é›™é­šåº§", msg: "éŸ³æ¨‚ç›’æˆ–æ˜Ÿç©ºç‡ˆï¼Œè®“å¤¢æƒ³åœ¨å¤œè£¡é–ƒé–ƒç™¼å…‰ ğŸŒ™" }
    ];
    const today = new Date();
    let nearest = null, minDiff = Infinity;
    holidays.forEach(h => {
      const holiday = new Date(today.getFullYear(), h.month - 1, h.day);
      if (holiday < today) holiday.setFullYear(today.getFullYear() + 1);
      const diff = Math.floor((holiday - today) / 86400000);
      if (diff < minDiff) { minDiff = diff; nearest = h; }
    });
    const gift = gifts[Math.floor(Math.random() * gifts.length)];
    document.getElementById("holiday-box").innerHTML =
      `<div class='holiday-title'>ä¸‹ä¸€å€‹ç¯€æ—¥ï¼š${nearest.name}</div>
       <div class='holiday-date'>${nearest.month}æœˆ${nearest.day}æ—¥ å€’æ•¸ ${minDiff} å¤©</div>
       <div class='horoscope'><strong>${gift.sign}</strong><br>${gift.msg}</div>`;

    // ======== Mariah Carey è§£å‡äº’å‹• ========
    const mariahBox = document.getElementById("mariahVideo");
    const overlay = document.getElementById("xmasOverlay");
    let blowCount = 0, blowing = false, blurLevel = 0;
    const fog = document.createElement("div");
    fog.style.position = "absolute"; fog.style.inset = "0";
    fog.style.pointerEvents = "none"; fog.style.backdropFilter = "blur(0px)";
    fog.style.transition = "backdrop-filter .15s ease"; fog.style.borderRadius = "12px";
    const wrap = document.createElement("div");
    wrap.style.position = "relative"; wrap.style.borderRadius = "12px";
    mariahBox.parentNode.insertBefore(wrap, mariahBox);
    wrap.appendChild(mariahBox); wrap.appendChild(fog);

    function startBlow() {
      blowing = true;
      blurLevel = Math.min(12, blurLevel + 2);
      fog.style.backdropFilter = `blur(${blurLevel}px)`;
    }
    function stopBlow() {
      if (!blowing) return;
      blowing = false;
      blowCount++;
      setTimeout(() => {
        blurLevel = Math.max(0, blurLevel - 1.5);
        fog.style.backdropFilter = `blur(${blurLevel}px)`;
      }, 200);
      if (blowCount >= 3) {
        overlay.style.display = "flex";
        overlay.innerHTML = `
          <div style="max-width:360px;padding:20px;border-radius:12px;background:rgba(255,255,255,0.1);border:2px solid #f8c25c;">
            <div style="margin-bottom:12px;font-size:18px;">ğŸ’¬ Mariahï¼šä½ å·²ç¶“ç­‰ä¸åŠè¦å…ˆè½æˆ‘å”±äº†å—ï¼Ÿ</div>
            <div style="font-size:14px;margin-bottom:10px;">æ»‘é¼ å†é»ä¸€æ¬¡æ‰æ’­éŸ³æ¨‚ã€‚ï¼ˆğŸ¶ æ’­æ”¾ / âŒ å–æ¶ˆï¼‰</div>
            <button id="playBtn">ğŸ¶ æ’­æ”¾</button>
            <button id="cancelBtn">âŒ å–æ¶ˆ</button>
          </div>`;
        document.getElementById("playBtn").onclick = () => {
          overlay.innerHTML = `<iframe src="https://www.youtube.com/embed/aAkMkVFwAoo?autoplay=1&controls=1&fs=1&rel=0" allow="autoplay; fullscreen" allowfullscreen style="width:100%;height:100%;border:none;"></iframe>`;
        };
        document.getElementById("cancelBtn").onclick = () => overlay.style.display = "none";
      }
    }
    wrap.addEventListener("mousedown", startBlow);
    document.addEventListener("mouseup", stopBlow);
    wrap.addEventListener("touchstart", (e)=>{e.preventDefault();startBlow();},{passive:false});
    document.addEventListener("touchend", stopBlow);
    document.addEventListener("keydown",(e)=>{if(e.code==="Space"){e.preventDefault();startBlow();}});
    document.addEventListener("keyup",(e)=>{if(e.code==="Space"){stopBlow();}});

    // ======== é›ªèŠ±ç‰¹æ•ˆ ========
    const snowflakes = [];
    const maxSnowflakes = 50;
    class Snowflake {
      constructor() {
        this.x = Math.random() * window.innerWidth;
        this.y = Math.random() * -50;
        this.size = Math.random() * 8 + 4;
        this.vx = Math.random() * 0.3 - 0.15;
        this.vy = Math.random() * 1 + 0.3;
        this.el = document.createElement("div");
        this.el.className = "snowflake";
        this.el.textContent = "â„ï¸";
        this.el.style.fontSize = this.size + "px";
        document.body.appendChild(this.el);
      }
      update() {
        this.x += this.vx; this.y += this.vy;
        if (this.y > window.innerHeight) { this.y = Math.random() * -50; this.x = Math.random() * window.innerWidth; }
        this.el.style.left = `${this.x}px`; this.el.style.top = `${this.y}px`;
      }
    }
    function createSnowflake(){ if(snowflakes.length<maxSnowflakes) snowflakes.push(new Snowflake()); }
    function animateSnow(){ createSnowflake(); for(const f of snowflakes) f.update(); requestAnimationFrame(animateSnow); }
    animateSnow();
  </script>
</body>
</html>
