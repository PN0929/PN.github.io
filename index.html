<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<title>ğŸ„ Mariah Carey è–èª•å€’æ•¸ x ä¸‹ç­è¨ˆç®—æ©Ÿ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
* { box-sizing: border-box; }
body {
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
  margin: 0; padding: 20px; min-height: 100vh;
  color: #fff; overflow-x: hidden;
  transition: background 1s ease;
}
.main-wrapper { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; position: relative; z-index: 5; }
.panel {
  background: rgba(255,255,255,0.12); border-radius: 12px; padding: 20px;
  max-width: 380px; border: 2px solid #f8c25c; box-shadow: 0 8px 24px rgba(255,255,255,0.2);
  backdrop-filter: blur(6px);
}
h1, h2 { text-align: center; color: #f8c25c; }
button {
  background: linear-gradient(135deg, #f8c25c 0%, #f7b733 100%);
  color: white; padding: 14px; font-size: 18px; border: none; border-radius: 6px;
  cursor: pointer; width: 100%; transition: 0.3s;
}
button:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(248,194,92,0.6); }

label { font-size: 16px; display: block; margin-top: 10px; }
input[type="text"] {
  width: 100%; padding: 10px; margin: 5px 0 15px;
  border: 2px solid #f8c25c; border-radius: 4px; font-size: 16px;
}
.flip-number { display: inline-block; font-family: 'Courier New', monospace; background: linear-gradient(135deg, #f8c25c 0%, #f7b733 100%); color: #fff; padding: 10px 14px; border-radius: 6px; font-size: 26px; margin: 0 6px; box-shadow: 0 4px 12px rgba(248,194,92,0.4); border: none; letter-spacing: 1px; }
.horoscope { margin-top: 15px; padding: 12px; background: rgba(255,255,255,0.1); border-radius: 8px; color: #ffe9a1; font-size: 14px; line-height: 1.6; border: 1px solid #f8c25c; box-shadow: 0 2px 8px rgba(248,194,92,0.3); }

/* â„ï¸ é›ªèŠ± */
.snowflake { position: fixed; color: white; pointer-events: none; z-index: 0; opacity: 0.9; text-shadow: 0 0 8px rgba(255,255,255,0.6); }

/* ğŸ¬ Overlay */
#xmasOverlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: black; z-index: 9999; display: none; justify-content: center; align-items: center;
  animation: fadeIn 1s ease; flex-direction: column;
}
#xmasOverlay iframe, #xmasOverlay video { width: 100%; height: 100%; border: none; object-fit: cover; }
#xmasText { position: absolute; bottom: 10%; text-align: center; font-size: 36px; color: #fff; text-shadow: 0 0 10px #f8c25c; opacity: 0; transition: opacity 2s ease; }
#xmasText.show { opacity: 1; }

/* ğŸ† æ–°å¹´æ¨¡å¼ */
@keyframes goldGlow {
  0%, 100% { background: linear-gradient(135deg, #fff6b7 0%, #f8c25c 100%); }
  50% { background: linear-gradient(135deg, #f8c25c 0%, #fff6b7 100%); }
}
.newyear { animation: goldGlow 3s infinite alternate; color: #fff; text-align: center; }
#newyearBtn {
  background: linear-gradient(135deg, #ffd700, #f8b500);
  border: none; color: #fff; font-size: 22px; padding: 16px 32px; border-radius: 50px;
  cursor: pointer; box-shadow: 0 0 20px rgba(255,215,0,0.6); transition: 0.4s;
}
#newyearBtn:hover { transform: scale(1.08); box-shadow: 0 0 30px rgba(255,230,100,0.9); }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
</style>
</head>

<body>
<div id="xmasOverlay"><div id="xmasText"></div></div>

<div class="main-wrapper">
  <div class="panel" id="holiday-box"></div>

  <div class="panel panel-tall">
    <h1>ğŸ„ ä»€éº¼æ™‚å€™å¯ä»¥å›å®¶</h1>
    <h2>HURCä¸‹ç­æ™‚é–“è¨ˆç®—æ©Ÿ</h2>
    <label for="start">ä¸Šç­æ™‚é–“ (hhmm):</label>
    <input type="text" id="start" placeholder="HHMM" inputmode="numeric" pattern="[0-9]*" />
    <button onclick="calc()">è¨ˆç®—ä½ çš„ä¸‹ç­æ™‚é–“</button>
    <div id="loading" style="display:none;text-align:center;margin:15px 0;">
      <div style="font-size:48px;animation:spin 2s linear infinite;">ğŸ…</div><div style="margin-top:10px;">è¨ˆç®—ä¸­...</div>
    </div>
    <h3 id="result"></h3>
    <div id="countdown" style="display:none;">
      <div style="font-size:18px;font-weight:bold;margin-bottom:15px">è·é›¢å¯ä»¥é›¢é–‹è¾¦å…¬å®¤é‚„æœ‰</div>
      <div id="countdown-display" style="display:flex;justify-content:center;gap:10px;">
        <div class="countdown-unit"><span class="countdown-number" id="h">00</span><div class="countdown-label">å°æ™‚</div></div>
        <div class="countdown-unit"><span class="countdown-number" id="m">00</span><div class="countdown-label">åˆ†é˜</div></div>
        <div class="countdown-unit"><span class="countdown-number" id="s">00</span><div class="countdown-label">ç§’</div></div>
      </div>
      <div class="countdown-reminder" style="margin-top:10px;font-size:13px;opacity:0.9;">ğŸ’¡ ä¸è¦åŠ ç­å¤ªä¹…å–”ï¼</div>
    </div>
  </div>

  <div class="panel panel-tall">
    <div class="holiday-title" style="font-size:22px;font-weight:bold;text-align:center;color:#f8c25c;">ğŸ… æ­£åœ¨è§£å‡ Mariah Carey...</div>
    <video id="mariahVideo" src="./mariah-defrosting-slow.mp4" muted playsinline preload="auto" style="width:100%;border-radius:12px;"></video>
    <div class="horoscope" id="horoscope"></div>
  </div>
</div>

<script>
let timer, offTime;
function update() {
  if (!offTime) return;
  const now = new Date();
  const diff = offTime - now;
  if (diff <= 0) {
    clearInterval(timer);
    document.getElementById('countdown').style.display = 'none';
    const result = document.getElementById('result');
    if (!result.innerHTML.includes('ä¸‹ç­æ™‚é–“åˆ°äº†')) {
      result.innerHTML += '<br><br>ğŸ‰ <strong>ä¸‹ç­æ™‚é–“åˆ°äº†ï¼å¿«å›å®¶å§ï¼</strong>';
    }
    return;
  }
  document.getElementById('h').textContent = String(Math.floor(diff / 3600000)).padStart(2, '0');
  document.getElementById('m').textContent = String(Math.floor(diff % 3600000 / 60000)).padStart(2, '0');
  document.getElementById('s').textContent = String(Math.floor(diff % 60000 / 1000)).padStart(2, '0');
}
function calc() {
  const input = document.getElementById("start").value;
  const result = document.getElementById("result");
  const loading = document.getElementById("loading");
  
  loading.style.display = 'block';
  result.innerHTML = '';
  document.getElementById('countdown').style.display = 'none';
  
  setTimeout(() => {
    loading.style.display = 'none';
    
    if (!input || input.length !== 4 || isNaN(input)) { result.innerText = "è«‹æ‚¨å†ä»”ç´°ç¢ºèªä¸Šç­æ™‚é–“ï¼Œä¸è¦ç©ç³»çµ± ^^"; return; }
    const h = parseInt(input.substring(0, 2)), min = parseInt(input.substring(2, 4));
    if (h < 0 || h > 23 || min < 0 || min > 59) { result.innerText = "è«‹æ‚¨å†ä»”ç´°ç¢ºèªä¸Šç­æ™‚é–“ï¼Œä¸è¦ç©ç³»çµ± ^^"; return; }
    if (input >= "0000" && input < "0730") { result.innerText = "ä¸Šç­æ™‚é–“æœ€æ—©å¾ 07:30 æ‰“å¡å”·ï¼"; return; }
    if (input >= "1200" && input <= "2359") { result.innerText = "å»ºè­°æ‚¨ç›´æ¥è«‹å‡ ^^"; return; }
    const now = new Date();
    const start = new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, min, 0);
    const work = 9.5 * 3600000;
    const late = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 9, 0, 0);
    if (start > late) {
      const leaveMins = Math.ceil((start - late) / 60000 / 30) * 30;
      const leaveStart = new Date(start.getTime() - leaveMins * 60000);
      const properOffTime = new Date(leaveStart.getTime() + work);
      result.innerHTML = (h >= 11 ? "âš ï¸ å¤ªæ™šäº†å§ï¼è¦ä¸è¦ç›´æ¥å›å®¶<br>" : "âš ï¸ æ³¨æ„ï¼æ‚¨å·²ç¶“é²åˆ°äº†ï¼<br>") + 
      `å»ºè­°æ‚¨é€™æ¨£è«‹å‡ï¼š${leaveStart.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} - ${start.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}ã€‚<br>
      â° å»ºè­°è«‹å‡æ™‚é•·ç‚ºï¼š${Math.floor(leaveMins/60)}å°æ™‚${leaveMins%60}åˆ†é˜ã€‚<br>`;
      result.innerHTML += `ğŸ•” è«‹å®Œå‡å¾Œå»ºè­°åœ¨ ${properOffTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} ä¸‹ç­`;
      offTime = new Date(start.getTime() + work);
    } else {
      result.innerHTML = "ğŸ‰ ä»Šå¤©åŠªåŠ›èµ·åºŠä¸Šç­äº†ï¼ç¹¼çºŒä¿æŒï¼<br>";
      offTime = new Date(start.getTime() + work);
      result.innerHTML += `ğŸ•” æ‚¨çš„ä¸‹ç­æ™‚é–“æ˜¯ï¼š${offTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
    }
    document.getElementById('countdown').style.display = 'block';
    if (timer) clearInterval(timer);
    update();
    timer = setInterval(update, 1000);
  }, 800);
}

/* === è–èª•ç¯€å€’æ•¸ & æ˜Ÿåº§ç¦®ç‰© === */
const today = new Date();
const christmas = new Date(today.getFullYear(), 11, 25);
if (today > christmas) christmas.setFullYear(today.getFullYear() + 1);
const daysLeft = Math.ceil((christmas - today) / 86400000);
document.getElementById("holiday-box").innerHTML = `<div class="holiday-title" style="font-size:22px;text-align:center;color:#f8c25c;">ğŸ è–èª•ç¯€å€’æ•¸</div><div class="holiday-date" style="text-align:center;">è·é›¢è–èª•ç¯€é‚„æœ‰ <span class="flip-number">${daysLeft}</span> å¤©</div>`;

/* === æ˜Ÿåº§è–èª•ç¦®ç‰©å»ºè­° === */
const horoscopes = [
  { sign: "â™ˆ ç‰¡ç¾Šåº§", msg: "è¡Œå‹•æ´¾çš„ä½ æœ€é©åˆæ”¶åˆ°ä¸€å°å’–å•¡æ©Ÿï¼Œæç¥åˆæé€Ÿ â˜•" },
  { sign: "â™‰ é‡‘ç‰›åº§", msg: "ä¸€æ¢é«˜ç´šåœå·¾æœ€èƒ½æº«æš–ä½ â€”â€”é‚„æœ‰ä½ çš„ç†è²¡å¿ƒ ğŸ’°" },
  { sign: "â™Š é›™å­åº§", msg: "å…©ä»½ç¦®ç‰©æœƒè®“ä½ æ¯”è¼ƒä¸ç³¾çµï¼Œå› ç‚ºä½ éƒ½æƒ³è¦ ğŸ˜" },
  { sign: "â™‹ å·¨èŸ¹åº§", msg: "æŸ”è»Ÿæ¯›æ¯¯ + ç†±å¯å¯ï¼Œå®Œç¾çš„å†¬å¤œæ¨™é… ğŸ’–" },
  { sign: "â™Œ ç…å­åº§", msg: "é‡‘è‰²é¦™æ°´æˆ–äº®ç‰‡å¤–å¥—ï¼Œè®“ä½ åœ¨æ´¾å°ä¸Šé–ƒçå…¨å ´ âœ¨" },
  { sign: "â™ è™•å¥³åº§", msg: "æ•´é½Šçš„æ‰‹å¸³æœ¬æœƒè®“ä½ å¿ƒæƒ…å¤§å¥½ ğŸ“˜" },
  { sign: "â™ å¤©ç§¤åº§", msg: "é¦™æ°›è Ÿç‡­èƒ½è®“ä½ æ‰¾åˆ°ç¯€æ—¥çš„å¹³è¡¡èˆ‡æµªæ¼« ğŸ”¥" },
  { sign: "â™ å¤©è åº§", msg: "ç¥ç§˜é»‘å·§å…‹åŠ›ç¦®ç›’ï¼Œä¸€å£ç”œä¸€å£å¿ƒå‹• ğŸ«" },
  { sign: "â™ å°„æ‰‹åº§", msg: "æ—…éŠåŸºé‡‘æˆ–éœ²ç‡Ÿè£å‚™ï¼Œä¸–ç•Œéƒ½åœ¨å‘¼å–šä½  ğŸŒ" },
  { sign: "â™‘ æ‘©ç¾¯åº§", msg: "å¯¦ç”¨çš„ä¿æº«ç“¶æˆ–ç­†é›»æ”¯æ¶ï¼Œè·å ´è–èª• MVP ğŸ’¼" },
  { sign: "â™’ æ°´ç“¶åº§", msg: "é›»å­å°ç©å…·æ˜¯ä½ çš„æµªæ¼«ï¼Œè¶Šæ€ªè¶Šå–œæ­¡ âš¡" },
  { sign: "â™“ é›™é­šåº§", msg: "éŸ³æ¨‚ç›’æˆ–æ˜Ÿç©ºç‡ˆï¼Œè®“å¤¢æƒ³åœ¨å¤œè£¡é–ƒé–ƒç™¼å…‰ ğŸŒ™" }
];
const randomHoroscope = horoscopes[Math.floor(Math.random() * horoscopes.length)];
document.getElementById("horoscope").innerHTML = `<strong>${randomHoroscope.sign}</strong><br>${randomHoroscope.msg}`;

/* === Mariah Carey è§£å‡å½±ç‰‡ === */
const mariahVideo = document.getElementById("mariahVideo");
mariahVideo.addEventListener("loadedmetadata", () => {
  const yearStart = new Date(today.getFullYear(), 0, 0);
  const dayOfYear = Math.floor((today - yearStart) / 86400000);
  const christmasEveDay = Math.floor((new Date(today.getFullYear(), 11, 24) - yearStart) / 86400000);
  const progress = Math.min(dayOfYear / christmasEveDay, 1);
  mariahVideo.currentTime = mariahVideo.duration * progress;
});

/* === 12/24 & 12/25 === */
const overlay = document.getElementById("xmasOverlay");
const text = document.getElementById("xmasText");
if (today.getMonth() === 11 && (today.getDate() === 24 || today.getDate() === 25)) {
  overlay.style.display = "flex";
  overlay.innerHTML = `
    <iframe src="https://www.youtube.com/embed/aAkMkVFwAoo?autoplay=1&controls=1&fs=1&rel=0"
            allow="autoplay; fullscreen" allowfullscreen></iframe>
    <div id="xmasText">${today.getDate() === 24 ? "ğŸ… Mariah Carey è§£å‡å®Œæˆï¼" : "ğŸ‰ Merry Christmas Everyone! ğŸ’–"}</div>`;
  setTimeout(() => document.getElementById("xmasText").classList.add("show"), 10000);
  
  // ğŸ† æ–°å¹´å½©è›‹æŒ‰éˆ•
  if (today.getDate() === 25) {
    setTimeout(() => {
      const btn = document.createElement("button");
      btn.id = "newyearBtn";
      btn.textContent = "âœ¨ è¿æ¥ 2026 âœ¨";
      btn.onclick = () => {
        overlay.innerHTML = `<div class='newyear'><h1>ğŸ’– ä¸€èµ·è¿æ¥æ›´
