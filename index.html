<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ä»€éº¼æ™‚å€™å¯ä»¥å›å®¶ ä¸‹ç­æ™‚é–“è¨ˆç®—æ©Ÿ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 10px;
    }

    .main-wrapper {
      display: flex;
      justify-content: center;
      gap: 40px;
      align-items: flex-start;
      flex-wrap: wrap;
    }

    .container {
      max-width: 600px;
      width: 100%;
      background: white;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
      box-sizing: border-box;
    }

    .side-events, .side-images {
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 100%;
      max-width: 250px;
    }

    .side-images img {
      width: 100%;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);
      transition: transform 0.3s ease;
    }

    .side-images img:hover {
      transform: scale(1.05);
    }

    .side-events {
      font-size: 16px;
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
    }

    h1, h2 {
      text-align: center;
      color: #333;
    }

    label {
      font-size: 16px;
      display: block;
      margin-top: 10px;
    }

    input[type="text"] {
      width: 100%;
      padding: 10px;
      margin: 5px 0 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      font-size: 16px;
    }

    button {
      background-color: #4CAF50;
      color: white;
      padding: 14px;
      font-size: 18px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      width: 100%;
    }

    button:hover {
      background-color: #45a049;
    }

    #result {
      text-align: center;
      margin-top: 20px;
      font-size: 18px;
    }

    @media (max-width: 800px) {
      .main-wrapper {
        flex-direction: column;
        align-items: center;
      }

      .side-images, .side-events {
        max-width: 100%;
        width: 100%;
      }

      .side-images img {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="main-wrapper">
    <!-- å·¦å´ç‰¹æ®Šæ—¥ & é€£å‡ -->
    <div class="side-events" id="holiday-box"></div>

    <!-- ä¸­é–“ -->
    <div class="container">
      <h1>ä»€éº¼æ™‚å€™å¯ä»¥å›å®¶</h1>
      <h2>HURCä¸‹ç­æ™‚é–“è¨ˆç®—æ©Ÿ</h2>

      <label for="start">ä¸Šç­æ™‚é–“ (hhmm):</label>
      <input type="text" id="start" placeholder="HHMM" inputmode="numeric" pattern="[0-9]*">

      <button onclick="calculateOffTime()">è¨ˆç®—ä½ çš„ä¸‹ç­æ™‚é–“</button>
      <h3 id="result"></h3>
    </div>

    <!-- å³å´åœ–ç‰‡ -->
    <div class="side-images">
      <img src="./image/pic1.png" alt="åœ–ç‰‡1">
      <a href="https://indiepublisher.tw/zh-hant/book/2099" target="_blank">
        <img src="./image/pic2.jpg" alt="åœ–ç‰‡2">
      </a>
    </div>
  </div>

  <script>
    function calculateOffTime() {
      const startInput = document.getElementById("start").value;
      if (!startInput || startInput.length !== 4 || isNaN(startInput)) {
        document.getElementById("result").innerText = "è«‹æ‚¨å†ä»”ç´°ç¢ºèªä¸Šç­æ™‚é–“ï¼Œä¸è¦ç©ç³»çµ± ^^";
        return;
      }

      const hours = parseInt(startInput.substring(0, 2), 10);
      const minutes = parseInt(startInput.substring(2, 4), 10);

      if (hours < 0 || hours > 23 || minutes < 0 || minutes > 59) {
        document.getElementById("result").innerText = "è«‹æ‚¨å†ä»”ç´°ç¢ºèªä¸Šç­æ™‚é–“ï¼Œä¸è¦ç©ç³»çµ± ^^";
        return;
      }

      if (startInput >= "0000" && startInput < "0730") {
        document.getElementById("result").innerText = "ä¸Šç­æ™‚é–“æœ€æ—©å¾ 07:30 æ‰“å¡å”·ï¼";
        return;
      }

      if (startInput >= "1200" && startInput <= "2359") {
        document.getElementById("result").innerText = "å»ºè­°æ‚¨ç›´æ¥è«‹å‡ ^^";
        return;
      }

      const startTime = new Date(`1970-01-01T${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:00`);
      const workDuration = 9.5 * 60 * 60 * 1000;
      const lateThreshold = new Date(`1970-01-01T09:00:00`);
      let leaveDurationMinutes = 0;

      if (startTime > lateThreshold) {
        const lateDuration = (startTime - lateThreshold) / (1000 * 60);
        leaveDurationMinutes = Math.ceil(lateDuration / 30) * 30;

        const leaveEndTime = startTime;
        const leaveStartTime = new Date(leaveEndTime.getTime() - leaveDurationMinutes * 60 * 1000);

        let message = "";
        if (startTime.getHours() >= 11) {
          message = "âš ï¸ å¤ªæ™šäº†å§ï¼è¦ä¸è¦ç›´æ¥å›å®¶<br>";
        } else {
          message = "âš ï¸ æ‚¨å·²ç¶“é²åˆ°äº†ï¼<br>";
        }
        message += `å»ºè­°æ‚¨é€™æ¨£è«‹å‡ï¼š${leaveStartTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} - ${leaveEndTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}ã€‚<br>`;

        document.getElementById("result").innerHTML = message;

        const leaveHours = Math.floor(leaveDurationMinutes / 60);
        const leaveMinutes = leaveDurationMinutes % 60;
        document.getElementById("result").innerHTML += `â° æ‚¨çš„è«‹å‡æ™‚é•·ç‚ºï¼š${leaveHours}å°æ™‚${leaveMinutes}åˆ†é˜ã€‚<br>`;
        const actualOffTime = new Date(leaveStartTime.getTime() + workDuration);
        document.getElementById("result").innerHTML += `ğŸ•” æ‚¨çš„ä¸‹ç­æ™‚é–“æ˜¯ï¼š${actualOffTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
      } else {
        document.getElementById("result").innerHTML = "ğŸ‰ ä»Šå¤©ä¹ŸåŠªåŠ›èµ·åºŠä¸Šç­äº†è€¶ï¼ç¹¼çºŒä¿æŒï¼<br>";
        const actualOffTime = new Date(startTime.getTime() + workDuration);
        document.getElementById("result").innerHTML += `ğŸ•” æ‚¨çš„ä¸‹ç­æ™‚é–“æ˜¯ï¼š${actualOffTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
      }
    }

    // é¡¯ç¤ºé€£å‡èˆ‡ä»Šæ—¥ç‰¹æ®Šç¯€æ—¥
    const holidays = [
      { name: "å‹å‹•ç¯€", date: "05/01" },
      { name: "ç«¯åˆç¯€", date: "05/31" },
      { name: "ä¸­ç§‹ç¯€", date: "09/06" },
      { name: "åœ‹æ…¶æ—¥", date: "10/10" },
      { name: "å…ƒæ—¦", date: "01/01" }
    ];

    const specialDays = {
      "01-01": "åŒ—æ¥µç†Šè·³æ°´æ—¥", "01-08": "åœ°çƒè‡ªè½‰æ—¥", "01-13": "è¾¦å…¬æ¡Œæ•´ç†æ—¥",
      "01-15": "è‰è“å†°æ·‡æ·‹æ—¥", "01-16": "ç„¡æ‰€äº‹äº‹æ—¥", "01-17": "æ”¾æ£„æ–°å¹´æ–°å¸Œæœ›æ—¥",
      "01-21": "æ„Ÿè¬æ¾é¼ æ—¥", "01-27": "å·§å…‹åŠ›è›‹ç³•æ—¥", "02-02": "å¯éº—é¤…æ—¥",
      "02-05": "å·§å…‹åŠ›ç«é‹æ—¥", "02-14": "åœ–æ›¸é¤¨æ„›å¥½è€…æ—¥", "02-15": "å–®èº«äººå£«é—œæ‡·æ—¥",
      "02-17": "æ—¥è¡Œä¸€å–„æ—¥", "02-24": "è¨å­é¦™èœæ—¥", "02-26": "é–‹å¿ƒæœæ—¥",
      "02-28": "å…¬å…±å ´åˆç¡è¦ºæ—¥", "03-05": "åœ–æ›¸é¤¨æ„›å¥½è€…æ—¥", "03-10": "ç¡åˆè¦ºæ—¥",
      "03-14": "åœ“å‘¨ç‡æ—¥", "03-18": "å°·å°¬æ™‚åˆ»æ—¥", "03-20": "ä¸–ç•Œèªªæ•…äº‹æ—¥",
      "03-21": "å…¬å…±ç¦®è²Œæ—¥", "03-22": "åœ‹éš›å·æ‡¶æ—¥", "03-30": "å…¬åœ’æ•£æ­¥æ—¥",
      "04-03": "ä¸–ç•Œæ´¾å°æ—¥", "04-04": "æ­¥è¡Œä¸Šç­æ—¥", "04-16": "ç©¿ç¡è¡£ä¸Šç­æ—¥",
      "04-26": "æ“æŠ±æœ‹å‹æ—¥", "04-27": "æ‘©æ–¯å¯†ç¢¼æ—¥", "05-04": "æ˜Ÿéš›å¤§æˆ°æ—¥",
      "05-05": "å¹³æ–¹æ ¹æ—¥", "05-10": "æ‰“æƒæˆ¿é–“æ—¥", "05-16": "æŠ«è–©æ´¾å°æ—¥",
      "05-30": "åœ‹éš›æŠ±è²“æ—¥", "05-31": "é¦¬å¡é¾æ—¥", "06-01": "èªªä¸€äº›å¥½è©±æ—¥",
      "06-02": "æ—©é»é›¢é–‹è¾¦å…¬å®¤æ—¥", "06-04": "æ“æŠ±ä½ çš„è²“æ—¥", "06-06": "å…¨åœ‹ç”œç”œåœˆæ—¥",
      "06-08": "å¥½æœ‹å‹æ—¥", "06-18": "åœ‹éš›é‡é¤æ—¥", "06-20": "å¸¶ä½ çš„ç‹—å»ä¸Šç­æ—¥",
      "07-03": "åœ‹éš›ç„¡å¡‘è† è¢‹æ—¥", "07-04": "äººè¡Œé“ç…è›‹æ—¥", "07-05": "å·¥ä½œç‹‚æ—¥",
      "07-07": "èªªå¯¦è©±æ—¥", "07-11": "ç‚ºå­¤ç¨çš„æ—¥å­æ‰“èµ·ç²¾ç¥æ—¥", "07-14": "éš¨å¿ƒæ‰€æ¬²æ—¥",
      "07-17": "ä¸–ç•Œè¡¨æƒ…ç¬¦è™Ÿæ—¥", "07-21": "åƒåœ¾é£Ÿç‰©æ—¥", "07-24": "è¬›å€‹å†·ç¬‘è©±æ—¥",
      "07-30": "åˆ†äº«æ“æŠ±æ—¥", "08-01": "åœ‹éš›å•¤é…’æ—¥", "08-05": "åƒç‹—ä¸€æ¨£å·¥ä½œæ—¥",
      "08-09": "æ„›æ›¸äººæ—¥", "08-13": "åœ‹éš›å·¦æ’‡å­æ—¥", "09-05": "æœ‰äº‹é²åˆ°æ—¥",
      "09-06": "å°æŠ—æ‹–å»¶æ—¥", "09-13": "æ­£å‘æ€è€ƒæ—¥", "09-19": "æ¨¡ä»¿æµ·ç›œèªªè©±æ—¥",
      "09-28": "å¥½é„°å±…æ—¥", "10-01": "åœ‹éš›å’–å•¡æ—¥", "10-03": "ä¸–ç•Œå¾®ç¬‘æ—¥",
      "10-20": "åœ‹éš›æ¨¹æ‡¶æ—¥", "11-11": "åœ‹éš›é›™èƒèƒæ—¥", "11-15": "æ¸…ç†ä½ çš„å†°ç®±æ—¥",
      "11-21": "ä¸–ç•Œå“ˆå›‰æ—¥", "11-30": "ç‚ºäº†å¥åº·å¾…åœ¨å®¶æ—¥", "12-05": "è—è‰²ç‰›ä»”è¤²æ—¥",
      "12-12": "ä¿æŒå£æ°£æ¸…æ–°æ—¥", "12-19": "é†œæ¯›è¡£æ—¥", "12-31": "ä¸‹å®šæ±ºå¿ƒæ—¥"
    };

    const today = new Date();
    const todayStr = today.toISOString().slice(5, 10);
    const todayEvent = specialDays[todayStr];

    let nearest = null;
    let minDiff = Infinity;

    holidays.forEach(h => {
      const holiday = new Date(`${today.getFullYear()}-${h.date}`);
      if (holiday < today) holiday.setFullYear(today.getFullYear() + 1);
      const diff = Math.floor((holiday - today) / (1000 * 60 * 60 * 24));
      if (diff < minDiff) {
        minDiff = diff;
        nearest = { ...h, days: diff };
      }
    });

    const holidayBox = document.getElementById("holiday-box");
    holidayBox.innerHTML = `
      <h3>ä¸‹å€‹é€£å‡å€’æ•¸</h3>
      <p>${nearest.name}ï¼ˆ${nearest.date}ï¼‰<br>é‚„æœ‰ ${nearest.days} å¤©ï¼</p>
    `;

    if (todayEvent) {
      holidayBox.innerHTML += `
        <h3>ä»Šå¤©çš„ç¯€æ—¥</h3>
        <p>ä»Šå¤©æ˜¯ã€Œ${todayEvent}ã€å”·ï¼</p>
      `;
    }
  </script>
</body>
</html>