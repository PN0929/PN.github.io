<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ„ Mariah Carey è–èª•å€’æ•¸ x ä¸‹ç­è¨ˆç®—æ©Ÿ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      margin: 0; padding: 20px; min-height: 100vh;
      color: #fff; overflow-x: hidden;
    }
    .main-wrapper {
      display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;
      position: relative; z-index: 5;
    }
    .panel {
      background: rgba(255,255,255,0.12);
      border-radius: 12px;
      padding: 20px;
      max-width: 380px;
      border: 2px solid #f8c25c;
      box-shadow: 0 8px 24px rgba(255,255,255,0.2);
      backdrop-filter: blur(6px);
    }
    h1, h2 { text-align: center; color: #f8c25c; }
    label { font-size: 16px; display: block; margin-top: 10px; }
    input[type="text"] {
      width: 100%; padding: 10px; margin: 5px 0 15px;
      border: 2px solid #f8c25c; border-radius: 4px; font-size: 16px;
      background: rgba(0,0,0,0.15); color: #fff;
    }
    button {
      background: linear-gradient(135deg, #f8c25c 0%, #f7b733 100%);
      color: #fff; padding: 14px; font-size: 18px;
      border: none; border-radius: 6px; cursor: pointer; width: 100%;
      transition: 0.3s;
    }
    button:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(248,194,92,0.6); }
    #loading { display: none; text-align: center; margin: 15px 0; }
    .loader-icon { font-size: 46px; animation: spin 2s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    #result { text-align: center; margin-top: 15px; font-size: 17px; }
    #countdown {
      margin-top: 20px; background: rgba(0,0,0,0.15);
      border-radius: 12px; padding: 15px; display: none; text-align: center;
      border: 1px solid rgba(248,194,92,0.4);
    }
    #countdown-display { display: flex; justify-content: center; gap: 10px; }
    .countdown-unit {
      background: rgba(255,255,255,0.07);
      border-radius: 8px;
      padding: 10px 14px;
      min-width: 72px;
    }
    .countdown-number { font-size: 30px; font-weight: bold; color: #f8c25c; }
    .countdown-label { font-size: 13px; }
    .holiday-title { font-size: 22px; font-weight: bold; text-align: center; color: #f8c25c; margin-bottom: 10px; }
    .holiday-date { text-align: center; margin-bottom: 10px; }
    .flip-number {
      display: inline-block; font-family: 'Courier New', monospace;
      background: linear-gradient(135deg, #f8c25c 0%, #f7b733 100%);
      color: #fff; padding: 6px 12px; border-radius: 6px;
      font-size: 20px; margin: 0 4px; box-shadow: 0 4px 12px rgba(248,194,92,0.4);
    }
    .horoscope {
      margin-top: 15px; padding: 12px;
      background: rgba(255,255,255,0.08);
      border-radius: 8px;
      color: #ffe9a1; font-size: 14px; line-height: 1.6;
      border: 1px solid rgba(248,194,92,0.4);
      box-shadow: 0 2px 8px rgba(248,194,92,0.2);
    }
    #mariahVideo { width: 100%; border-radius: 12px; }
    #xmasOverlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: #000; z-index: 9999; display: none;
      justify-content: center; align-items: center; flex-direction: column;
      animation: fadeIn 0.5s ease;
    }
    #xmasOverlay iframe {
      width: 100%; height: 100%; border: none; object-fit: cover;
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .snowflake {
      position: fixed; color: #fff; pointer-events: none;
      z-index: 0; opacity: 0.9; text-shadow: 0 0 8px rgba(255,255,255,0.6);
    }
    .footer-note {
      text-align: center;
      font-size: 14px;
      color: #f8e8b0;
      margin-top: 30px;
      animation: glowText 2s infinite alternate;
    }
    @keyframes glowText {
      from { text-shadow: 0 0 5px #f8c25c; }
      to { text-shadow: 0 0 15px #fff6b7; }
    }
  </style>
</head>
<body>
  <div id="xmasOverlay"></div>
  <div class="main-wrapper">
    <div class="panel" id="holiday-box"></div>
    <div class="panel">
      <h1>ğŸ„ ä»€éº¼æ™‚å€™å¯ä»¥å›å®¶</h1>
      <h2>HURCä¸‹ç­æ™‚é–“è¨ˆç®—æ©Ÿ</h2>
      <label for="start">ä¸Šç­æ™‚é–“ (hhmm):</label>
      <input type="text" id="start" placeholder="HHMM" inputmode="numeric" pattern="[0-9]*" />
      <button onclick="calc()">è¨ˆç®—ä½ çš„ä¸‹ç­æ™‚é–“</button>
      <div id="loading"><div class="loader-icon">ğŸ…</div><div style="margin-top:10px;">è¨ˆç®—ä¸­...</div></div>
      <h3 id="result"></h3>
      <div id="countdown">
        <div style="font-size:18px;font-weight:bold;margin-bottom:15px">è·é›¢å¯ä»¥é›¢é–‹è¾¦å…¬å®¤é‚„æœ‰</div>
        <div id="countdown-display">
          <div class="countdown-unit"><span class="countdown-number" id="h">00</span><div class="countdown-label">å°æ™‚</div></div>
          <div class="countdown-unit"><span class="countdown-number" id="m">00</span><div class="countdown-label">åˆ†é˜</div></div>
          <div class="countdown-unit"><span class="countdown-number" id="s">00</span><div class="countdown-label">ç§’</div></div>
        </div>
        <div style="margin-top:10px;font-size:13px;opacity:0.9;">ğŸ’¡ ä¸è¦åŠ ç­å¤ªä¹…å–”ï¼</div>
      </div>
    </div>
    <div class="panel">
      <div class="holiday-title">ğŸ… æ­£åœ¨è§£å‡ Mariah Carey...</div>
      <video id="mariahVideo" src="./mariah-defrosting-slow.mp4" muted playsinline preload="auto"></video>
    </div>
  </div>
  <div class="footer-note">ğŸ‘©â€ğŸ’» æ²›æ© æ›´æ–°æ–¼ 2025 å¹´ 11 æœˆ 2 æ—¥ï¼ˆå›ä¾†ä¸Šç­äº†ï¼±ï¼±ï¼‰</div>
  <script>
    let timer, offTime;
    function updateCountdown() {
      if (!offTime) return;
      const now = new Date();
      const diff = offTime - now;
      if (diff <= 0) {
        clearInterval(timer);
        document.getElementById('countdown').style.display = 'none';
        const result = document.getElementById('result');
        if (!result.innerHTML.includes('ä¸‹ç­æ™‚é–“åˆ°äº†')) {
          result.innerHTML += '<br><br>ğŸ‰ <strong>ä¸‹ç­æ™‚é–“åˆ°äº†ï¼å¿«å›å®¶å§ï¼</strong>';
        }
        return;
      }
      document.getElementById('h').textContent = String(Math.floor(diff / 3600000)).padStart(2, '0');
      document.getElementById('m').textContent = String(Math.floor(diff % 3600000 / 60000)).padStart(2, '0');
      document.getElementById('s').textContent = String(Math.floor(diff % 60000 / 1000)).padStart(2, '0');
    }
    function calc() {
      const input = document.getElementById("start").value;
      const result = document.getElementById("result");
      const loading = document.getElementById("loading");
      loading.style.display = 'block';
      result.innerHTML = '';
      document.getElementById('countdown').style.display = 'none';
      setTimeout(() => {
        loading.style.display = 'none';
        if (!input || input.length !== 4 || isNaN(input)) { result.innerText = "è«‹æ‚¨å†ä»”ç´°ç¢ºèªä¸Šç­æ™‚é–“ï¼Œä¸è¦ç©ç³»çµ± ^^"; return; }
        const h = parseInt(input.substring(0, 2)), min = parseInt(input.substring(2, 4));
        if (h < 0 || h > 23 || min < 0 || min > 59) { result.innerText = "è«‹æ‚¨å†ä»”ç´°ç¢ºèªä¸Šç­æ™‚é–“ï¼Œä¸è¦ç©ç³»çµ± ^^"; return; }
        if (input >= "0000" && input < "0730") { result.innerText = "ä¸Šç­æ™‚é–“æœ€æ—©å¾ 07:30 æ‰“å¡å”·ï¼"; return; }
        if (input >= "1200" && input <= "2359") { result.innerText = "å»ºè­°æ‚¨ç›´æ¥è«‹å‡ ^^"; return; }
        const now = new Date();
        const start = new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, min, 0);
        const work = 9.5 * 3600000;
        const late = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 9, 0, 0);
        if (start > late) {
          const leaveMins = Math.ceil((start - late) / 60000 / 30) * 30;
          const leaveStart = new Date(start.getTime() - leaveMins * 60000);
          const properOffTime = new Date(leaveStart.getTime() + work);
          result.innerHTML = (h >= 11 ? "âš ï¸ å¤ªæ™šäº†å§ï¼è¦ä¸è¦ç›´æ¥å›å®¶<br>" : "âš ï¸ æ³¨æ„ï¼æ‚¨å·²ç¶“é²åˆ°äº†ï¼<br>") +
            `å»ºè­°æ‚¨é€™æ¨£è«‹å‡ï¼š${leaveStart.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} - ${start.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}ã€‚<br>
             â° å»ºè­°è«‹å‡æ™‚é•·ç‚ºï¼š${Math.floor(leaveMins/60)}å°æ™‚${leaveMins%60}åˆ†é˜ã€‚<br>`;
          result.innerHTML += `ğŸ•” è«‹å®Œå‡å¾Œå»ºè­°åœ¨ ${properOffTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} ä¸‹ç­`;
          offTime = new Date(start.getTime() + work);
        } else {
          result.innerHTML = "ğŸ‰ ä»Šå¤©åŠªåŠ›èµ·åºŠä¸Šç­äº†ï¼ç¹¼çºŒä¿æŒï¼<br>";
          offTime = new Date(start.getTime() + work);
          result.innerHTML += `ğŸ•” æ‚¨çš„ä¸‹ç­æ™‚é–“æ˜¯ï¼š${offTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
        }
        document.getElementById('countdown').style.display = 'block';
        if (timer) clearInterval(timer);
        updateCountdown();
        timer = setInterval(updateCountdown, 1000);
      }, 800);
    }
    const today = new Date();
    const christmas = new Date(today.getFullYear(), 11, 25);
    if (today > christmas) christmas.setFullYear(today.getFullYear() + 1);
    const daysLeft = Math.ceil((christmas - today) / 86400000);
    const holidayBox = document.getElementById("holiday-box");
    holidayBox.innerHTML = `<div class="holiday-title">ğŸ è–èª•ç¯€å€’æ•¸</div><div class="holiday-date">è·é›¢è–èª•ç¯€é‚„æœ‰ <span class="flip-number">${daysLeft}</span> å¤©</div>`;
    const horoscopes = [
      { sign: "â™ˆ ç‰¡ç¾Šåº§", msg: "è¡Œå‹•æ´¾çš„ä½ æœ€é©åˆæ”¶åˆ°ä¸€å°å’–å•¡æ©Ÿï¼Œæç¥åˆæé€Ÿ â˜•" },
      { sign: "â™‰ é‡‘ç‰›åº§", msg: "ä¸€æ¢é«˜ç´šåœå·¾æœ€èƒ½æº«æš–ä½ â€”â€”é‚„æœ‰ä½ çš„ç†è²¡å¿ƒ ğŸ’°" },
      { sign: "â™Š é›™å­åº§", msg: "å…©ä»½ç¦®ç‰©æœƒè®“ä½ æ¯”è¼ƒä¸ç³¾çµï¼Œå› ç‚ºä½ éƒ½æƒ³è¦ ğŸ˜" },
      { sign: "â™‹ å·¨èŸ¹åº§", msg: "æŸ”è»Ÿæ¯›æ¯¯ + ç†±å¯å¯ï¼Œå®Œç¾çš„å†¬å¤œæ¨™é… ğŸ’–" },
      { sign: "â™Œ ç…å­åº§", msg: "é‡‘è‰²é¦™æ°´æˆ–äº®ç‰‡å¤–å¥—ï¼Œè®“ä½ åœ¨æ´¾å°ä¸Šé–ƒçå…¨å ´ âœ¨" },
      { sign: "â™ è™•å¥³åº§", msg: "æ•´é½Šçš„æ‰‹å¸³æœ¬æœƒè®“ä½ å¿ƒæƒ…å¤§å¥½ ğŸ“˜" },
      { sign: "â™ å¤©ç§¤åº§", msg: "é¦™æ°›è Ÿç‡­èƒ½è®“ä½ æ‰¾åˆ°ç¯€æ—¥çš„å¹³è¡¡èˆ‡æµªæ¼« ğŸ”¥" },
      { sign: "â™ å¤©è åº§", msg: "ç¥ç§˜é»‘å·§å…‹åŠ›ç¦®ç›’ï¼Œä¸€å£ç”œä¸€å£å¿ƒå‹• ğŸ«" },
      { sign: "â™ å°„æ‰‹åº§", msg: "æ—…éŠåŸºé‡‘æˆ–éœ²ç‡Ÿè£å‚™ï¼Œä¸–ç•Œéƒ½åœ¨å‘¼å–šä½  ğŸŒ" },
      { sign: "â™‘ æ‘©ç¾¯åº§", msg: "å¯¦ç”¨çš„ä¿æº«ç“¶æˆ–ç­†é›»æ”¯æ¶ï¼Œè·å ´è–èª• MVP ğŸ’¼" },
      { sign: "â™’ æ°´ç“¶åº§", msg: "é›»å­å°ç©å…·æ˜¯ä½ çš„æµªæ¼«ï¼Œè¶Šæ€ªè¶Šå–œæ­¡ âš¡" },
      { sign: "â™“ é›™é­šåº§", msg: "éŸ³æ¨‚ç›’æˆ–æ˜Ÿç©ºç‡ˆï¼Œè®“å¤¢æƒ³åœ¨å¤œè£¡é–ƒé–ƒç™¼å…‰ ğŸŒ™" }
    ];
    const randomHoroscope = horoscopes[Math.floor(Math.random() * horoscopes.length)];
    holidayBox.innerHTML += `<div class="horoscope"><strong>${randomHoroscope.sign}</strong><br>${randomHoroscope.msg}</div>`;
    const mariahBox = document.getElementById("mariahVideo");
    let blowCount = 0, blowing = false, blurLevel = 0;
    const fog = document.createElement("div");
    fog.style.position = "absolute";
    fog.style.inset = "0";
    fog.style.pointerEvents = "none";
    fog.style.backdropFilter = "blur(0px)";
    fog.style.transition = "backdrop-filter .15s ease";
    fog.style.borderRadius = "12px";
    const wrap = document.createElement("div");
    mariahBox.parentNode.insertBefore(wrap, mariahBox);
    wrap.style.position = "relative";
    wrap.style.borderRadius = "12px";
    wrap.appendChild(mariahBox);
    wrap.appendChild(fog);
    function startBlow() {
      blowing = true;
      blurLevel = Math.min(12, blurLevel + 2);
      fog.style.backdropFilter = `blur(${blurLevel}px)`;
    }
    function stopBlow() {
      if (!blowing) return;
      blowing = false;
      blowCount++;
      setTimeout(() => {
        blurLevel = Math.max(0, blurLevel - 1.5);
        fog.style.backdropFilter = `blur(${blurLevel}px)`;
      }, 200);
      if (blowCount >= 3) {
        const overlay = document.getElementById("xmasOverlay");
        overlay.style.display = "flex";
        overlay.innerHTML = `<iframe src="https://www.youtube.com/embed/aAkMkVFwAoo?autoplay=1&controls=1&fs=1&rel=0" allow="autoplay; fullscreen" allowfullscreen></iframe>`;
      }
    }
    wrap.addEventListener("mousedown", startBlow);
    document.addEventListener("mouseup", stopBlow);
    wrap.addEventListener("touchstart", (e)=>{e.preventDefault();startBlow();},{passive:false});
    document.addEventListener("touchend", stopBlow);
    document.addEventListener("keydown",(e)=>{if(e.code==="Space"){e.preventDefault();startBlow();}});
    document.addEventListener("keyup",(e)=>{if(e.code==="Space"){stopBlow();}});
    const snowflakes = []; const maxSnowflakes = 100;
    class Snowflake {constructor(){this.size=Math.random()*8+4;this.x=Math.random()*window.innerWidth;this.y=-this.size;this.vx=(Math.random()-0.5)*0.25;this.vy=Math.random()*0.5+0.2;this.el=document.createElement("div");this.el.className="snowflake";this.el.textContent="â„ï¸";this.el.style.fontSize=this.size+"px";document.body.appendChild(this.el);}update(){this.x+=this.vx;this.y+=this.vy;if(this.y>=window.innerHeight-this.size){this.y=window.innerHeight-this.size;this.vy=0;this.vx=0;}this.el.style.left=this.x+"px";this.el.style.top=this.y+"px";}}
    function createSnowflake(){if(snowflakes.length<maxSnowflakes)snowflakes.push(new Snowflake());}
    function animateSnow(){createSnowflake();for(const f of snowflakes)f.update();requestAnimationFrame(animateSnow);}
    animateSnow();
  </script>
</body>
</html>
