<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>ä»€éº¼æ™‚å€™å¯ä»¥å›å®¶ ä¸‹ç­æ™‚é–“è¨ˆç®—æ©Ÿ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }
    body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #2d1b4e 0%, #1a1a2e 100%); margin: 0; padding: 20px; min-height: 100vh; }
    .main-wrapper { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; position: relative; z-index: 10; align-items: stretch; }
    .panel-tall { display: flex; flex-direction: column; }
    #holiday-box { justify-content: center; }
    .panel { background: white; border-radius: 12px; box-shadow: 0 8px 32px rgba(255, 107, 0, 0.3); padding: 20px; width: 100%; max-width: 360px; border: 2px solid #ff6b00; position: relative; transition: box-shadow 0.3s; }
    .panel:hover { box-shadow: 0 8px 40px rgba(255, 107, 0, 0.6), 0 0 30px rgba(255, 149, 0, 0.4); }
    .holiday-title { font-size: 22px; font-weight: bold; text-align: center; color: #ff6b00; margin-bottom: 10px; margin-top: 0; }
    .holiday-date { font-size: 16px; text-align: center; margin-bottom: 12px; color: #444; }
    .holiday-countdown { text-align: center; font-size: 16px; color: #555; }
    .horoscope { margin-top: 15px; padding: 12px; background: linear-gradient(135deg, #1a1a2e 0%, #2d1b4e 100%); border-radius: 8px; color: #ffb347; font-size: 14px; line-height: 1.6; box-shadow: 0 2px 8px rgba(255, 107, 0, 0.3); border: 1px solid #ff6b00; }
    .flip-number { display: inline-block; font-family: 'Courier New', monospace; background: linear-gradient(135deg, #ff6b00 0%, #ff9500 100%); color: #fff; padding: 10px 14px; border-radius: 6px; font-size: 26px; margin: 0 6px; box-shadow: 0 4px 12px rgba(255, 107, 0, 0.4); border: none; letter-spacing: 1px; }
    h1, h2 { text-align: center; color: #ff6b00; }
    label { font-size: 16px; display: block; margin-top: 10px; }
    input[type="text"] { width: 100%; padding: 10px; margin: 5px 0 15px; border: 2px solid #ffb347; border-radius: 4px; font-size: 16px; transition: border 0.3s; }
    input[type="text"]:focus { outline: none; border-color: #ff6b00; }
    button { background: linear-gradient(135deg, #ff6b00 0%, #ff9500 100%); color: white; padding: 14px; font-size: 18px; border: none; border-radius: 4px; cursor: pointer; width: 100%; position: relative; overflow: hidden; }
    button:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255, 107, 0, 0.6); transition: all 0.3s; }
    button:hover::after { content: 'ğŸ‘»'; position: absolute; right: 15px; top: 50%; transform: translateY(-50%); animation: ghostFloat 2s infinite; }
    @keyframes ghostFloat { 0%, 100% { transform: translateY(-50%); } 50% { transform: translateY(-70%); } }
    .pumpkin { position: fixed; font-size: 30px; pointer-events: none; z-index: 0; will-change: transform; }
    #result { text-align: center; margin-top: 20px; font-size: 18px; }
    #countdown { margin-top: 25px; padding: 20px; background: linear-gradient(135deg, #ff6b00 0%, #ff9500 100%); border-radius: 10px; text-align: center; display: none; color: white; box-shadow: 0 4px 12px rgba(255, 107, 0, 0.4); border: 2px solid #ff6b00; }
    #countdown-display { display: flex; justify-content: center; gap: 10px; margin-top: 15px; }
    .countdown-unit { background: rgba(255,255,255,0.2); border-radius: 50%; padding: 15px 20px; min-width: 80px; position: relative; }
    .countdown-unit::before { content: ''; position: absolute; top: -5px; left: 50%; transform: translateX(-50%); width: 20px; height: 15px; background: #2d5016; border-radius: 50% 50% 0 0; }
    .countdown-unit::after { content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 25px; height: 8px; background: rgba(0,0,0,0.3); border-radius: 50%; }
    .countdown-number { font-size: 32px; font-weight: bold; display: block; }
    .countdown-label { font-size: 14px; margin-top: 5px; opacity: 0.9; }
    .countdown-reminder { margin-top: 10px; font-size: 13px; opacity: 0.9; }
    #loading { display: none; text-align: center; margin: 20px 0; }
    .ghost-loader { display: inline-block; font-size: 50px; animation: ghostSpin 1.5s linear infinite; }
    @keyframes ghostSpin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    #friday { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 9999; animation: fadeIn 0.5s; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes scaleIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
    .friday-content { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 40px; border-radius: 20px; text-align: center; animation: scaleIn 0.5s; max-width: 90%; }
    .friday-emoji { font-size: 80px; animation: bounce 1s infinite; }
    .friday-text { color: white; font-size: 32px; font-weight: bold; margin: 20px 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
    .friday-close { background: white; color: #f5576c; border: none; padding: 12px 30px; font-size: 16px; border-radius: 25px; cursor: pointer; font-weight: bold; margin-top: 20px; }
    .friday-close:hover { transform: scale(1.05); }
    .side-images img { width: 100%; height: auto; border-radius: 8px; box-shadow: 0 0 8px rgba(0, 0, 0, 0.15); transition: transform 0.3s ease; }
    .side-images img:hover { transform: scale(1.05); }
    @media (max-width: 1024px) { .main-wrapper { flex-direction: column; align-items: center; } }
  </style>
</head>
<body>
  <div id="friday"><div class="friday-content"><div class="friday-emoji">ğŸ‰</div><div class="friday-text">çµ‚æ–¼é€±äº”å•¦ï¼</div><div style="color: white; font-size: 18px;">é€±æœ«å°±åœ¨çœ¼å‰ï¼ŒåŠ æ²¹ï¼ğŸ’ª</div><button class="friday-close" onclick="document.getElementById('friday').style.display='none'">å¤ªå¥½äº†ï¼ğŸ‘</button></div></div>
  <div class="main-wrapper">
    <div class="panel panel-tall" id="holiday-box"></div>
    <div class="panel panel-tall">
      <h1>ä»€éº¼æ™‚å€™å¯ä»¥å›å®¶</h1>
      <h2>HURCä¸‹ç­æ™‚é–“è¨ˆç®—æ©Ÿ</h2>
      <label for="start">ä¸Šç­æ™‚é–“ (hhmm):</label>
      <input type="text" id="start" placeholder="HHMM" inputmode="numeric" pattern="[0-9]*" />
      <button onclick="calc()">è¨ˆç®—ä½ çš„ä¸‹ç­æ™‚é–“</button>
      <div id="loading"><div class="ghost-loader">ğŸ‘»</div><div style="margin-top:10px;color:#666;">è¨ˆç®—ä¸­...</div></div>
      <h3 id="result"></h3>
      <div id="countdown"><div style="font-size:18px;font-weight:bold;margin-bottom:15px">è·é›¢å¯ä»¥é›¢é–‹è¾¦å…¬å®¤é‚„æœ‰</div><div id="countdown-display"><div class="countdown-unit"><span class="countdown-number" id="h">00</span><div class="countdown-label">å°æ™‚</div></div><div class="countdown-unit"><span class="countdown-number" id="m">00</span><div class="countdown-label">åˆ†é˜</div></div><div class="countdown-unit"><span class="countdown-number" id="s">00</span><div class="countdown-label">ç§’</div></div></div><div class="countdown-reminder">ğŸ’¡ ä¸è¦åŠ ç­å¤ªä¹…å–”ï¼</div></div>
    </div>
    <div class="panel side-images panel-tall"><img src="./image/pic1.png" alt="åœ–ç‰‡1" /></div>
  </div>
  <div style="text-align: center; margin-top: 20px; padding: 15px;">
    <div style="font-size: 14px; color: #666;">ğŸ‘©â€ğŸ’» æ²›æ© æ›´æ–°æ–¼ 2025 å¹´ 10 æœˆ 2 æ—¥</div>
    <div style="font-size: 13px; color: #999; margin-top: 5px;">ğŸ“ ç›®å‰æ­£åœ¨æ³°åœ‹ï¼ˆä¸æ˜¯ KK åœ’å€ï¼‰</div>
  </div>
  <script>
    let timer, offTime;
    function update() {
      if (!offTime) return;
      const now = new Date();
      const diff = offTime - now;
      if (diff <= 0) {
        clearInterval(timer);
        document.getElementById('countdown').style.display = 'none';
        const result = document.getElementById('result');
        if (!result.innerHTML.includes('ä¸‹ç­æ™‚é–“åˆ°äº†')) {
          result.innerHTML += '<br><br>ğŸ‰ <strong>ä¸‹ç­æ™‚é–“åˆ°äº†ï¼å¿«å›å®¶å§ï¼</strong>';
        }
        return;
      }
      document.getElementById('h').textContent = String(Math.floor(diff / 3600000)).padStart(2, '0');
      document.getElementById('m').textContent = String(Math.floor(diff % 3600000 / 60000)).padStart(2, '0');
      document.getElementById('s').textContent = String(Math.floor(diff % 60000 / 1000)).padStart(2, '0');
    }
    function calc() {
      const input = document.getElementById("start").value;
      const result = document.getElementById("result");
      const loading = document.getElementById("loading");
      
      loading.style.display = 'block';
      result.innerHTML = '';
      document.getElementById('countdown').style.display = 'none';
      
      setTimeout(() => {
        loading.style.display = 'none';
        
        if (!input || input.length !== 4 || isNaN(input)) { result.innerText = "è«‹æ‚¨å†ä»”ç´°ç¢ºèªä¸Šç­æ™‚é–“ï¼Œä¸è¦ç©ç³»çµ± ^^"; return; }
        const h = parseInt(input.substring(0, 2)), min = parseInt(input.substring(2, 4));
        if (h < 0 || h > 23 || min < 0 || min > 59) { result.innerText = "è«‹æ‚¨å†ä»”ç´°ç¢ºèªä¸Šç­æ™‚é–“ï¼Œä¸è¦ç©ç³»çµ± ^^"; return; }
        if (input >= "0000" && input < "0730") { result.innerText = "ä¸Šç­æ™‚é–“æœ€æ—©å¾ 07:30 æ‰“å¡å”·ï¼"; return; }
        if (input >= "1200" && input <= "2359") { result.innerText = "å»ºè­°æ‚¨ç›´æ¥è«‹å‡ ^^"; return; }
        const now = new Date();
        const start = new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, min, 0);
        const work = 9.5 * 3600000;
        const late = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 9, 0, 0);
        if (start > late) {
          const leaveMins = Math.ceil((start - late) / 60000 / 30) * 30;
          const leaveStart = new Date(start.getTime() - leaveMins * 60000);
          const properOffTime = new Date(leaveStart.getTime() + work);
          result.innerHTML = (h >= 11 ? "âš ï¸ å¤ªæ™šäº†å§ï¼è¦ä¸è¦ç›´æ¥å›å®¶<br>" : "âš ï¸ æ³¨æ„ï¼æ‚¨å·²ç¶“é²åˆ°äº†ï¼<br>") + `å»ºè­°æ‚¨é€™æ¨£è«‹å‡ï¼š${leaveStart.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} - ${start.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}ã€‚<br>â° å»ºè­°è«‹å‡æ™‚é•·ç‚ºï¼š${Math.floor(leaveMins/60)}å°æ™‚${leaveMins%60}åˆ†é˜ã€‚<br>`;
          result.innerHTML += `ğŸ•” è«‹å®Œå‡å¾Œå»ºè­°åœ¨ ${properOffTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} ä¸‹ç­`;
          offTime = new Date(start.getTime() + work);
        } else {
          result.innerHTML = "ğŸ‰ ä»Šå¤©åŠªåŠ›èµ·åºŠä¸Šç­äº†ï¼ç¹¼çºŒä¿æŒï¼<br>";
          offTime = new Date(start.getTime() + work);
          result.innerHTML += `ğŸ•” æ‚¨çš„ä¸‹ç­æ™‚é–“æ˜¯ï¼š${offTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
        }
        document.getElementById('countdown').style.display = 'block';
        if (timer) clearInterval(timer);
        update();
        timer = setInterval(update, 1000);
      }, 800);
    }
    const holidays = [
      { name: "å…ƒæ—¦", month: 1, day: 1 }, { name: "å‹å‹•ç¯€", month: 5, day: 1 }, { name: "ç«¯åˆç¯€", month: 5, day: 31 },
      { name: "æ•™å¸«ç¯€", month: 9, day: 28 }, { name: "ä¸­ç§‹ç¯€", month: 10, day: 6 }, { name: "åœ‹æ…¶æ—¥", month: 10, day: 10 },
      { name: "å…‰å¾©ç¯€", month: 10, day: 25 }, { name: "è¡Œæ†²ç´€å¿µæ—¥", month: 12, day: 25 }
    ];
    const specialDays = {
      "01-01": "åŒ—æ¥µç†Šè·³æ°´æ—¥", "01-08": "åœ°çƒè‡ªè½‰æ—¥", "01-13": "è¾¦å…¬æ¡Œæ•´ç†æ—¥", "01-15": "è‰è“å†°æ·‡æ·‹æ—¥", "01-16": "ç„¡æ‰€äº‹äº‹æ—¥", "01-17": "æ”¾æ£„æ–°å¹´æ–°å¸Œæœ›æ—¥",
      "01-21": "æ„Ÿè¬æ¾é¼ æ—¥", "01-27": "å·§å…‹åŠ›è›‹ç³•æ—¥", "02-02": "å¯éº—é¤…æ—¥", "02-05": "å·§å…‹åŠ›ç«é‹æ—¥", "02-14": "åœ–æ›¸é¤¨æ„›å¥½è€…æ—¥", "02-15": "å–®èº«äººå£«é—œæ‡·æ—¥",
      "02-17": "æ—¥è¡Œä¸€å–„æ—¥", "02-24": "è¨å­é¦™èœæ—¥", "02-26": "é–‹å¿ƒæœæ—¥", "02-28": "å…¬å…±å ´åˆç¡è¦ºæ—¥", "03-05": "åœ–æ›¸é¤¨æ„›å¥½è€…æ—¥", "03-10": "ç¡åˆè¦ºæ—¥",
      "03-14": "åœ“å‘¨ç‡æ—¥", "03-18": "å°·å°¬æ™‚åˆ»æ—¥", "03-20": "ä¸–ç•Œèªªæ•…äº‹æ—¥", "03-21": "å…¬å…±ç¦®è²Œæ—¥", "03-22": "åœ‹éš›å·æ‡¶æ—¥", "03-30": "å…¬åœ’æ•£æ­¥æ—¥",
      "04-03": "ä¸–ç•Œæ´¾å°æ—¥", "04-04": "æ­¥è¡Œä¸Šç­æ—¥", "04-16": "ç©¿ç¡è¡£ä¸Šç­æ—¥", "04-26": "æ“æŠ±æœ‹å‹æ—¥", "04-27": "æ‘©æ–¯å¯†ç¢¼æ—¥", "05-04": "æ˜Ÿéš›å¤§æˆ°æ—¥",
      "05-05": "å¹³æ–¹æ ¹æ—¥", "05-10": "æ‰“æƒæˆ¿é–“æ—¥", "05-16": "æŠ«è–©æ´¾å°æ—¥", "05-30": "åœ‹éš›æŠ±è²“æ—¥", "05-31": "é¦¬å¡é¾æ—¥", "06-01": "èªªä¸€äº›å¥½è©±æ—¥",
      "06-02": "æ—©é»é›¢é–‹è¾¦å…¬å®¤æ—¥", "06-04": "æ“æŠ±ä½ çš„è²“æ—¥", "06-06": "å…¨åœ‹ç”œç”œåœˆæ—¥", "06-08": "å¥½æœ‹å‹æ—¥", "06-18": "åœ‹éš›é‡é¤æ—¥", "06-20": "å¸¶ä½ çš„ç‹—å»ä¸Šç­æ—¥",
      "07-03": "åœ‹éš›ç„¡å¡‘è† è¢‹æ—¥", "07-04": "äººè¡Œé“ç…è›‹æ—¥", "07-05": "å·¥ä½œç‹‚æ—¥", "07-07": "èªªå¯¦è©±æ—¥", "07-11": "ç‚ºå­¤ç¨çš„æ—¥å­æ‰“èµ·ç²¾ç¥æ—¥", "07-14": "éš¨å¿ƒæ‰€æ¬²æ—¥",
      "07-17": "ä¸–ç•Œè¡¨æƒ…ç¬¦è™Ÿæ—¥", "07-21": "åƒåœ¾é£Ÿç‰©æ—¥", "07-24": "è¬›å€‹å†·ç¬‘è©±æ—¥", "07-30": "åˆ†äº«æ“æŠ±æ—¥", "08-01": "åœ‹éš›å•¤é…’æ—¥", "08-05": "åƒç‹—ä¸€æ¨£å·¥ä½œæ—¥",
      "08-09": "æ„›æ›¸äººæ—¥", "08-13": "åœ‹éš›å·¦æ’‡å­æ—¥", "09-05": "æœ‰äº‹é²åˆ°æ—¥", "09-06": "å°æŠ—æ‹–å»¶æ—¥", "09-13": "æ­£å‘æ€è€ƒæ—¥", "09-19": "æ¨¡ä»¿æµ·ç›œèªªè©±æ—¥",
      "09-28": "å¥½é„°å±…æ—¥", "10-01": "åœ‹éš›å’–å•¡æ—¥", "10-03": "ä¸–ç•Œå¾®ç¬‘æ—¥", "10-20": "åœ‹éš›æ¨¹æ‡¶æ—¥", "11-11": "åœ‹éš›é›™èƒèƒæ—¥", "11-15": "æ¸…ç†ä½ çš„å†°ç®±æ—¥",
      "11-21": "ä¸–ç•Œå“ˆå›‰æ—¥", "11-30": "ç‚ºäº†å¥åº·å¾…åœ¨å®¶æ—¥", "12-05": "è—è‰²ç‰›ä»”è¤²æ—¥", "12-12": "ä¿æŒå£æ°£æ¸…æ–°æ—¥", "12-19": "é†œæ¯›è¡£æ—¥", "12-31": "ä¸‹å®šæ±ºå¿ƒæ—¥"
    };
    const horoscopes = [
      { sign: "â™ˆ ç‰¡ç¾Šåº§", msg: "ä»Šå¤©é©åˆå¤§è†½è¡Œå‹•ï¼Œä¸‹ç­å¾Œå»åƒå¤§é¤å§ï¼" },
      { sign: "â™‰ é‡‘ç‰›åº§", msg: "è²¡é‹ä¸éŒ¯ï¼Œä½†åˆ¥è¡å‹•è³¼ç‰©å–”ï½" },
      { sign: "â™Š é›™å­åº§", msg: "æºé€šé‹è¶…å¼·ï¼Œé©åˆè·Ÿä¸»ç®¡ææ—©ä¸‹ç­ï¼" },
      { sign: "â™‹ å·¨èŸ¹åº§", msg: "å®…åœ¨å®¶å°±æ˜¯æœ€å¥½çš„é‹å‹¢ï¼Œæ—©é»å›å®¶å§ï¼" },
      { sign: "â™Œ ç…å­åº§", msg: "ä»Šå¤©æ˜¯ç™¼å…‰ç™¼ç†±çš„ä¸€å¤©ï¼Œè¨˜å¾—æº–æ™‚ä¸‹ç­ï¼" },
      { sign: "â™ è™•å¥³åº§", msg: "æ³¨æ„ç´°ç¯€ï¼Œåˆ¥å¿˜äº†æ‰“å¡ä¸‹ç­ï½" },
      { sign: "â™ å¤©ç§¤åº§", msg: "å¹³è¡¡å·¥ä½œèˆ‡ç”Ÿæ´»ï¼Œä»Šå¤©é©åˆç´„æœƒï¼" },
      { sign: "â™ å¤©è åº§", msg: "ç¥ç§˜èƒ½é‡çˆ†æ£šï¼Œé©åˆä½èª¿ä¸‹ç­å·å·çˆ½ï¼" },
      { sign: "â™ å°„æ‰‹åº§", msg: "è‡ªç”±çš„éˆé­‚æ¸´æœ›å†’éšªï¼Œä¸‹ç­å»æ¢ç´¢å§ï¼" },
      { sign: "â™‘ æ‘©ç¾¯åº§", msg: "åŠªåŠ›æœƒæœ‰å›å ±ï¼Œä½†ä¹Ÿè¦è¨˜å¾—ä¼‘æ¯å–”ï¼" },
      { sign: "â™’ æ°´ç“¶åº§", msg: "å‰µæ„æ»¿æ»¿ï¼Œä¸‹ç­å¾Œä¾†é»ä¸ä¸€æ¨£çš„å§ï¼" },
      { sign: "â™“ é›™é­šåº§", msg: "å¤¢æƒ³èˆ‡ç¾å¯¦äº¤ç¹”ï¼Œä»Šå¤©é©åˆæ”¾ç©ºè€å»¢ï¼" }
    ];
    const randomHoroscope = horoscopes[Math.floor(Math.random() * horoscopes.length)];
    const today = new Date(), todayStr = today.toISOString().slice(5, 10);
    let nearest = null, minDiff = Infinity, maxDiff = 0;
    holidays.forEach(h => {
      const holiday = new Date(today.getFullYear(), h.month - 1, h.day);
      if (holiday < today) holiday.setFullYear(today.getFullYear() + 1);
      const diff = Math.floor((holiday - today) / 86400000);
      if (diff < minDiff) { minDiff = diff; nearest = { ...h, days: diff }; }
      if (diff > maxDiff) maxDiff = diff;
    });
    const progress = Math.max(0, Math.min(100, ((maxDiff - nearest.days) / maxDiff) * 100));
    document.getElementById("holiday-box").innerHTML = `<div class="holiday-title">ä¸‹ä¸€å€‹åœ‹å®šå‡æœŸå€’æ•¸ï¼</div><div class="holiday-date">${nearest.month}æœˆ${nearest.day}æ—¥ï¼Œ${nearest.name}</div><div class="holiday-countdown">å€’æ•¸ <span class="flip-number">${nearest.days}</span> æ—¥</div>` + (specialDays[todayStr] ? `<hr><div class="holiday-countdown">ä»Šå¤©æ˜¯ã€Œ${specialDays[todayStr]}ã€å”·ï¼</div>` : '') + `<div class="horoscope"><strong>${randomHoroscope.sign}</strong><br>${randomHoroscope.msg}</div>`;
    if (today.getDay() === 5) document.getElementById('friday').style.display = 'flex';
    
    // ç°¡æ˜“ç‰©ç†å¼•æ“ - å—ç“œé£„è½æ•ˆæœ
    const pumpkins = [];
    const maxPumpkins = 50;
    const gravity = 0.5;
    const bounce = 0.2;
    const friction = 0.98;
    
    class Pumpkin {
      constructor() {
        this.size = 30;
        this.x = Math.random() * (window.innerWidth - this.size);
        this.y = -50;
        this.vx = (Math.random() - 0.5) * 2; // æ°´å¹³é€Ÿåº¦
        this.vy = 0; // å‚ç›´é€Ÿåº¦
        this.rotation = Math.random() * 360;
        this.rotationSpeed = (Math.random() - 0.5) * 5;
        this.element = document.createElement('div');
        this.element.className = 'pumpkin';
        this.element.textContent = 'ğŸƒ';
        this.element.style.left = this.x + 'px';
        this.element.style.top = this.y + 'px';
        this.element.style.transform = `rotate(${this.rotation}deg)`;
        document.body.appendChild(this.element);
      }
      
      update() {
        // æ‡‰ç”¨é‡åŠ›
        this.vy += gravity;
        
        // æ›´æ–°ä½ç½®
        this.x += this.vx;
        this.y += this.vy;
        
        // æ—‹è½‰
        this.rotation += this.rotationSpeed;
        
        // åœ°é¢ç¢°æ’
        if (this.y + this.size >= window.innerHeight) {
          this.y = window.innerHeight - this.size;
          this.vy *= -bounce; // å½ˆè·³
          this.vx *= friction; // æ‘©æ“¦åŠ›
          this.rotationSpeed *= friction;
          
          // åœæ­¢æ¢ä»¶
          if (Math.abs(this.vy) < 0.5) {
            this.vy = 0;
            this.rotationSpeed *= 0.8;
          }
        }
        
        // å·¦å³é‚Šç•Œç¢°æ’
        if (this.x <= 0 || this.x + this.size >= window.innerWidth) {
          this.x = Math.max(0, Math.min(this.x, window.innerWidth - this.size));
          this.vx *= -bounce;
        }
        
        // èˆ‡å…¶ä»–å—ç“œç¢°æ’
        for (let other of pumpkins) {
          if (other === this) continue;
          
          const dx = other.x - this.x;
          const dy = other.y - this.y;
          const distance = Math.sqrt(dx * dx + dy * dy);
          
          if (distance < this.size) {
            // ç°¡å–®çš„ç¢°æ’åæ‡‰
            const angle = Math.atan2(dy, dx);
            const targetX = this.x + Math.cos(angle) * this.size;
            const targetY = this.y + Math.sin(angle) * this.size;
            
            const ax = (targetX - other.x) * 0.05;
            const ay = (targetY - other.y) * 0.05;
            
            this.vx -= ax;
            this.vy -= ay;
            other.vx += ax;
            other.vy += ay;
            
            // åˆ†é›¢é‡ç–Šçš„å—ç“œ
            const overlap = this.size - distance;
            const separateX = (dx / distance) * overlap * 0.5;
            const separateY = (dy / distance) * overlap * 0.5;
            
            this.x -= separateX;
            this.y -= separateY;
            other.x += separateX;
            other.y += separateY;
          }
        }
        
        // æ›´æ–° DOM
        this.element.style.left = this.x + 'px';
        this.element.style.top = this.y + 'px';
        this.element.style.transform = `rotate(${this.rotation}deg)`;
      }
      
      isSettled() {
        return Math.abs(this.vy) < 0.1 && Math.abs(this.vx) < 0.1 && 
               this.y + this.size >= window.innerHeight - 5;
      }
    }
    
    function createPumpkin() {
      if (pumpkins.length >= maxPumpkins) return;
      const pumpkin = new Pumpkin();
      pumpkins.push(pumpkin);
    }
    
    function animate() {
      for (let pumpkin of pumpkins) {
        pumpkin.update();
      }
      requestAnimationFrame(animate);
    }
    
    setInterval(createPumpkin, 2000);
    animate();
  </script>
</body>
</html>
