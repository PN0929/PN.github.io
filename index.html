<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>什麼時候可以回家 下班時間計算機</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }
    body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #2d1b4e 0%, #1a1a2e 100%); margin: 0; padding: 20px; min-height: 100vh; }
    .main-wrapper { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; position: relative; z-index: 10; align-items: stretch; }
    .panel-tall { display: flex; flex-direction: column; }
    #holiday-box { justify-content: center; }
    .panel { background: white; border-radius: 12px; box-shadow: 0 8px 32px rgba(255, 107, 0, 0.3); padding: 20px; width: 100%; max-width: 360px; border: 2px solid #ff6b00; position: relative; transition: box-shadow 0.3s; }
    .panel:hover { box-shadow: 0 8px 40px rgba(255, 107, 0, 0.6), 0 0 30px rgba(255, 149, 0, 0.4); }
    .holiday-title { font-size: 22px; font-weight: bold; text-align: center; color: #ff6b00; margin-bottom: 10px; margin-top: 0; }
    .holiday-date { font-size: 16px; text-align: center; margin-bottom: 12px; color: #444; }
    .holiday-countdown { text-align: center; font-size: 16px; color: #555; }
    .horoscope { margin-top: 15px; padding: 12px; background: linear-gradient(135deg, #1a1a2e 0%, #2d1b4e 100%); border-radius: 8px; color: #ffb347; font-size: 14px; line-height: 1.6; box-shadow: 0 2px 8px rgba(255, 107, 0, 0.3); border: 1px solid #ff6b00; }
    .flip-number { display: inline-block; font-family: 'Courier New', monospace; background: linear-gradient(135deg, #ff6b00 0%, #ff9500 100%); color: #fff; padding: 10px 14px; border-radius: 6px; font-size: 26px; margin: 0 6px; box-shadow: 0 4px 12px rgba(255, 107, 0, 0.4); border: none; letter-spacing: 1px; }
    h1, h2 { text-align: center; color: #ff6b00; }
    label { font-size: 16px; display: block; margin-top: 10px; }
    input[type="text"] { width: 100%; padding: 10px; margin: 5px 0 15px; border: 2px solid #ffb347; border-radius: 4px; font-size: 16px; transition: border 0.3s; }
    input[type="text"]:focus { outline: none; border-color: #ff6b00; }
    button { background: linear-gradient(135deg, #ff6b00 0%, #ff9500 100%); color: white; padding: 14px; font-size: 18px; border: none; border-radius: 4px; cursor: pointer; width: 100%; position: relative; overflow: hidden; }
    button:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255, 107, 0, 0.6); transition: all 0.3s; }
    button:hover::after { content: '👻'; position: absolute; right: 15px; top: 50%; transform: translateY(-50%); animation: ghostFloat 2s infinite; }
    @keyframes ghostFloat { 0%, 100% { transform: translateY(-50%); } 50% { transform: translateY(-70%); } }
    .pumpkin { position: fixed; font-size: 30px; pointer-events: none; z-index: 0; will-change: transform; }
    #result { text-align: center; margin-top: 20px; font-size: 18px; }
    #countdown { margin-top: 25px; padding: 20px; background: linear-gradient(135deg, #ff6b00 0%, #ff9500 100%); border-radius: 10px; text-align: center; display: none; color: white; box-shadow: 0 4px 12px rgba(255, 107, 0, 0.4); border: 2px solid #ff6b00; }
    #countdown-display { display: flex; justify-content: center; gap: 10px; margin-top: 15px; }
    .countdown-unit { background: rgba(255,255,255,0.2); border-radius: 50%; padding: 15px 20px; min-width: 80px; position: relative; }
    .countdown-unit::before { content: ''; position: absolute; top: -5px; left: 50%; transform: translateX(-50%); width: 20px; height: 15px; background: #2d5016; border-radius: 50% 50% 0 0; }
    .countdown-unit::after { content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 25px; height: 8px; background: rgba(0,0,0,0.3); border-radius: 50%; }
    .countdown-number { font-size: 32px; font-weight: bold; display: block; }
    .countdown-label { font-size: 14px; margin-top: 5px; opacity: 0.9; }
    .countdown-reminder { margin-top: 10px; font-size: 13px; opacity: 0.9; }
    #loading { display: none; text-align: center; margin: 20px 0; }
    .ghost-loader { display: inline-block; font-size: 50px; animation: ghostSpin 1.5s linear infinite; }
    @keyframes ghostSpin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    #friday { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 9999; animation: fadeIn 0.5s; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes scaleIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
    .friday-content { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 40px; border-radius: 20px; text-align: center; animation: scaleIn 0.5s; max-width: 90%; }
    .friday-emoji { font-size: 80px; animation: bounce 1s infinite; }
    .friday-text { color: white; font-size: 32px; font-weight: bold; margin: 20px 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
    .friday-close { background: white; color: #f5576c; border: none; padding: 12px 30px; font-size: 16px; border-radius: 25px; cursor: pointer; font-weight: bold; margin-top: 20px; }
    .friday-close:hover { transform: scale(1.05); }
    .side-images img { width: 100%; height: auto; border-radius: 8px; box-shadow: 0 0 8px rgba(0, 0, 0, 0.15); transition: transform 0.3s ease; }
    .side-images img:hover { transform: scale(1.05); }
    @media (max-width: 1024px) { .main-wrapper { flex-direction: column; align-items: center; } }
  </style>
</head>
<body>
  <div id="friday"><div class="friday-content"><div class="friday-emoji">🎉</div><div class="friday-text">終於週五啦！</div><div style="color: white; font-size: 18px;">週末就在眼前，加油！💪</div><button class="friday-close" onclick="document.getElementById('friday').style.display='none'">太好了！👍</button></div></div>
  <div class="main-wrapper">
    <div class="panel panel-tall" id="holiday-box"></div>
    <div class="panel panel-tall">
      <h1>什麼時候可以回家</h1>
      <h2>HURC下班時間計算機</h2>
      <label for="start">上班時間 (hhmm):</label>
      <input type="text" id="start" placeholder="HHMM" inputmode="numeric" pattern="[0-9]*" />
      <button onclick="calc()">計算你的下班時間</button>
      <div id="loading"><div class="ghost-loader">👻</div><div style="margin-top:10px;color:#666;">計算中...</div></div>
      <h3 id="result"></h3>
      <div id="countdown"><div style="font-size:18px;font-weight:bold;margin-bottom:15px">距離可以離開辦公室還有</div><div id="countdown-display"><div class="countdown-unit"><span class="countdown-number" id="h">00</span><div class="countdown-label">小時</div></div><div class="countdown-unit"><span class="countdown-number" id="m">00</span><div class="countdown-label">分鐘</div></div><div class="countdown-unit"><span class="countdown-number" id="s">00</span><div class="countdown-label">秒</div></div></div><div class="countdown-reminder">💡 不要加班太久喔！</div></div>
    </div>
    <div class="panel side-images panel-tall"><img src="./image/pic1.png" alt="圖片1" /></div>
  </div>
  <div style="text-align: center; margin-top: 20px; padding: 15px;">
    <div style="font-size: 14px; color: #666;">👩‍💻 沛恩 更新於 2025 年 10 月 2 日</div>
    <div style="font-size: 13px; color: #999; margin-top: 5px;">📍 目前正在泰國（不是 KK 園區）</div>
  </div>
  <script>
    let timer, offTime;
    function update() {
      if (!offTime) return;
      const now = new Date();
      const diff = offTime - now;
      if (diff <= 0) {
        clearInterval(timer);
        document.getElementById('countdown').style.display = 'none';
        const result = document.getElementById('result');
        if (!result.innerHTML.includes('下班時間到了')) {
          result.innerHTML += '<br><br>🎉 <strong>下班時間到了！快回家吧！</strong>';
        }
        return;
      }
      document.getElementById('h').textContent = String(Math.floor(diff / 3600000)).padStart(2, '0');
      document.getElementById('m').textContent = String(Math.floor(diff % 3600000 / 60000)).padStart(2, '0');
      document.getElementById('s').textContent = String(Math.floor(diff % 60000 / 1000)).padStart(2, '0');
    }
    function calc() {
      const input = document.getElementById("start").value;
      const result = document.getElementById("result");
      const loading = document.getElementById("loading");
      
      loading.style.display = 'block';
      result.innerHTML = '';
      document.getElementById('countdown').style.display = 'none';
      
      setTimeout(() => {
        loading.style.display = 'none';
        
        if (!input || input.length !== 4 || isNaN(input)) { result.innerText = "請您再仔細確認上班時間，不要玩系統 ^^"; return; }
        const h = parseInt(input.substring(0, 2)), min = parseInt(input.substring(2, 4));
        if (h < 0 || h > 23 || min < 0 || min > 59) { result.innerText = "請您再仔細確認上班時間，不要玩系統 ^^"; return; }
        if (input >= "0000" && input < "0730") { result.innerText = "上班時間最早從 07:30 打卡唷！"; return; }
        if (input >= "1200" && input <= "2359") { result.innerText = "建議您直接請假 ^^"; return; }
        const now = new Date();
        const start = new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, min, 0);
        const work = 9.5 * 3600000;
        const late = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 9, 0, 0);
        if (start > late) {
          const leaveMins = Math.ceil((start - late) / 60000 / 30) * 30;
          const leaveStart = new Date(start.getTime() - leaveMins * 60000);
          const properOffTime = new Date(leaveStart.getTime() + work);
          result.innerHTML = (h >= 11 ? "⚠️ 太晚了吧！要不要直接回家<br>" : "⚠️ 注意！您已經遲到了！<br>") + `建議您這樣請假：${leaveStart.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} - ${start.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}。<br>⏰ 建議請假時長為：${Math.floor(leaveMins/60)}小時${leaveMins%60}分鐘。<br>`;
          result.innerHTML += `🕔 請完假後建議在 ${properOffTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} 下班`;
          offTime = new Date(start.getTime() + work);
        } else {
          result.innerHTML = "🎉 今天努力起床上班了！繼續保持！<br>";
          offTime = new Date(start.getTime() + work);
          result.innerHTML += `🕔 您的下班時間是：${offTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
        }
        document.getElementById('countdown').style.display = 'block';
        if (timer) clearInterval(timer);
        update();
        timer = setInterval(update, 1000);
      }, 800);
    }
    const holidays = [
      { name: "元旦", month: 1, day: 1 }, { name: "勞動節", month: 5, day: 1 }, { name: "端午節", month: 5, day: 31 },
      { name: "教師節", month: 9, day: 28 }, { name: "中秋節", month: 10, day: 6 }, { name: "國慶日", month: 10, day: 10 },
      { name: "光復節", month: 10, day: 25 }, { name: "行憲紀念日", month: 12, day: 25 }
    ];
    const specialDays = {
      "01-01": "北極熊跳水日", "01-08": "地球自轉日", "01-13": "辦公桌整理日", "01-15": "草莓冰淇淋日", "01-16": "無所事事日", "01-17": "放棄新年新希望日",
      "01-21": "感謝松鼠日", "01-27": "巧克力蛋糕日", "02-02": "可麗餅日", "02-05": "巧克力火鍋日", "02-14": "圖書館愛好者日", "02-15": "單身人士關懷日",
      "02-17": "日行一善日", "02-24": "討厭香菜日", "02-26": "開心果日", "02-28": "公共場合睡覺日", "03-05": "圖書館愛好者日", "03-10": "睡午覺日",
      "03-14": "圓周率日", "03-18": "尷尬時刻日", "03-20": "世界說故事日", "03-21": "公共禮貌日", "03-22": "國際偷懶日", "03-30": "公園散步日",
      "04-03": "世界派對日", "04-04": "步行上班日", "04-16": "穿睡衣上班日", "04-26": "擁抱朋友日", "04-27": "摩斯密碼日", "05-04": "星際大戰日",
      "05-05": "平方根日", "05-10": "打掃房間日", "05-16": "披薩派對日", "05-30": "國際抱貓日", "05-31": "馬卡龍日", "06-01": "說一些好話日",
      "06-02": "早點離開辦公室日", "06-04": "擁抱你的貓日", "06-06": "全國甜甜圈日", "06-08": "好朋友日", "06-18": "國際野餐日", "06-20": "帶你的狗去上班日",
      "07-03": "國際無塑膠袋日", "07-04": "人行道煎蛋日", "07-05": "工作狂日", "07-07": "說實話日", "07-11": "為孤獨的日子打起精神日", "07-14": "隨心所欲日",
      "07-17": "世界表情符號日", "07-21": "垃圾食物日", "07-24": "講個冷笑話日", "07-30": "分享擁抱日", "08-01": "國際啤酒日", "08-05": "像狗一樣工作日",
      "08-09": "愛書人日", "08-13": "國際左撇子日", "09-05": "有事遲到日", "09-06": "對抗拖延日", "09-13": "正向思考日", "09-19": "模仿海盜說話日",
      "09-28": "好鄰居日", "10-01": "國際咖啡日", "10-03": "世界微笑日", "10-20": "國際樹懶日", "11-11": "國際雙胞胎日", "11-15": "清理你的冰箱日",
      "11-21": "世界哈囉日", "11-30": "為了健康待在家日", "12-05": "藍色牛仔褲日", "12-12": "保持口氣清新日", "12-19": "醜毛衣日", "12-31": "下定決心日"
    };
    const horoscopes = [
      { sign: "♈ 牡羊座", msg: "今天適合大膽行動，下班後去吃大餐吧！" },
      { sign: "♉ 金牛座", msg: "財運不錯，但別衝動購物喔～" },
      { sign: "♊ 雙子座", msg: "溝通運超強，適合跟主管提早下班！" },
      { sign: "♋ 巨蟹座", msg: "宅在家就是最好的運勢，早點回家吧！" },
      { sign: "♌ 獅子座", msg: "今天是發光發熱的一天，記得準時下班！" },
      { sign: "♍ 處女座", msg: "注意細節，別忘了打卡下班～" },
      { sign: "♎ 天秤座", msg: "平衡工作與生活，今天適合約會！" },
      { sign: "♏ 天蠍座", msg: "神秘能量爆棚，適合低調下班偷偷爽！" },
      { sign: "♐ 射手座", msg: "自由的靈魂渴望冒險，下班去探索吧！" },
      { sign: "♑ 摩羯座", msg: "努力會有回報，但也要記得休息喔！" },
      { sign: "♒ 水瓶座", msg: "創意滿滿，下班後來點不一樣的吧！" },
      { sign: "♓ 雙魚座", msg: "夢想與現實交織，今天適合放空耍廢！" }
    ];
    const randomHoroscope = horoscopes[Math.floor(Math.random() * horoscopes.length)];
    const today = new Date(), todayStr = today.toISOString().slice(5, 10);
    let nearest = null, minDiff = Infinity, maxDiff = 0;
    holidays.forEach(h => {
      const holiday = new Date(today.getFullYear(), h.month - 1, h.day);
      if (holiday < today) holiday.setFullYear(today.getFullYear() + 1);
      const diff = Math.floor((holiday - today) / 86400000);
      if (diff < minDiff) { minDiff = diff; nearest = { ...h, days: diff }; }
      if (diff > maxDiff) maxDiff = diff;
    });
    const progress = Math.max(0, Math.min(100, ((maxDiff - nearest.days) / maxDiff) * 100));
    document.getElementById("holiday-box").innerHTML = `<div class="holiday-title">下一個國定假期倒數！</div><div class="holiday-date">${nearest.month}月${nearest.day}日，${nearest.name}</div><div class="holiday-countdown">倒數 <span class="flip-number">${nearest.days}</span> 日</div>` + (specialDays[todayStr] ? `<hr><div class="holiday-countdown">今天是「${specialDays[todayStr]}」唷！</div>` : '') + `<div class="horoscope"><strong>${randomHoroscope.sign}</strong><br>${randomHoroscope.msg}</div>`;
    if (today.getDay() === 5) document.getElementById('friday').style.display = 'flex';
    
    // 簡易物理引擎 - 南瓜飄落效果
    const pumpkins = [];
    const maxPumpkins = 50;
    const gravity = 0.5;
    const bounce = 0.2;
    const friction = 0.98;
    
    class Pumpkin {
      constructor() {
        this.size = 30;
        this.x = Math.random() * (window.innerWidth - this.size);
        this.y = -50;
        this.vx = (Math.random() - 0.5) * 2; // 水平速度
        this.vy = 0; // 垂直速度
        this.rotation = Math.random() * 360;
        this.rotationSpeed = (Math.random() - 0.5) * 5;
        this.element = document.createElement('div');
        this.element.className = 'pumpkin';
        this.element.textContent = '🎃';
        this.element.style.left = this.x + 'px';
        this.element.style.top = this.y + 'px';
        this.element.style.transform = `rotate(${this.rotation}deg)`;
        document.body.appendChild(this.element);
      }
      
      update() {
        // 應用重力
        this.vy += gravity;
        
        // 更新位置
        this.x += this.vx;
        this.y += this.vy;
        
        // 旋轉
        this.rotation += this.rotationSpeed;
        
        // 地面碰撞
        if (this.y + this.size >= window.innerHeight) {
          this.y = window.innerHeight - this.size;
          this.vy *= -bounce; // 彈跳
          this.vx *= friction; // 摩擦力
          this.rotationSpeed *= friction;
          
          // 停止條件
          if (Math.abs(this.vy) < 0.5) {
            this.vy = 0;
            this.rotationSpeed *= 0.8;
          }
        }
        
        // 左右邊界碰撞
        if (this.x <= 0 || this.x + this.size >= window.innerWidth) {
          this.x = Math.max(0, Math.min(this.x, window.innerWidth - this.size));
          this.vx *= -bounce;
        }
        
        // 與其他南瓜碰撞
        for (let other of pumpkins) {
          if (other === this) continue;
          
          const dx = other.x - this.x;
          const dy = other.y - this.y;
          const distance = Math.sqrt(dx * dx + dy * dy);
          
          if (distance < this.size) {
            // 簡單的碰撞反應
            const angle = Math.atan2(dy, dx);
            const targetX = this.x + Math.cos(angle) * this.size;
            const targetY = this.y + Math.sin(angle) * this.size;
            
            const ax = (targetX - other.x) * 0.05;
            const ay = (targetY - other.y) * 0.05;
            
            this.vx -= ax;
            this.vy -= ay;
            other.vx += ax;
            other.vy += ay;
            
            // 分離重疊的南瓜
            const overlap = this.size - distance;
            const separateX = (dx / distance) * overlap * 0.5;
            const separateY = (dy / distance) * overlap * 0.5;
            
            this.x -= separateX;
            this.y -= separateY;
            other.x += separateX;
            other.y += separateY;
          }
        }
        
        // 更新 DOM
        this.element.style.left = this.x + 'px';
        this.element.style.top = this.y + 'px';
        this.element.style.transform = `rotate(${this.rotation}deg)`;
      }
      
      isSettled() {
        return Math.abs(this.vy) < 0.1 && Math.abs(this.vx) < 0.1 && 
               this.y + this.size >= window.innerHeight - 5;
      }
    }
    
    function createPumpkin() {
      if (pumpkins.length >= maxPumpkins) return;
      const pumpkin = new Pumpkin();
      pumpkins.push(pumpkin);
    }
    
    function animate() {
      for (let pumpkin of pumpkins) {
        pumpkin.update();
      }
      requestAnimationFrame(animate);
    }
    
    setInterval(createPumpkin, 2000);
    animate();
  </script>
</body>
</html>
